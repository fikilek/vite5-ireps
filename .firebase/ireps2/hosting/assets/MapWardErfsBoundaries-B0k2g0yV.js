import{s as y,r as i,bf as b,j as s,t as M,v as T,n as N,bg as A}from"./index-2DC40iBv.js";import{u as C}from"./useIrepsMap-DAYH5mkw.js";import{b as k}from"./useTrns-RyE2jCXL.js";import w from"./IwTrnsOnAst-Cu7ga-PT.js";import S from"./FormErf-BIu6cPlj.js";const I=e=>{console.log("props",e);const{erf:t}=e,a=y(),n=i.useMemo(()=>{var d,l,m,h;return{lat:(l=(d=t==null?void 0:t.address)==null?void 0:d.gps)==null?void 0:l.latitude,lng:(h=(m=t==null?void 0:t.address)==null?void 0:m.gps)==null?void 0:h.longitude}},[t]),[r,x]=b(),[v,c]=i.useState(!1),o=i.useCallback(()=>c(!0),[]);return i.useEffect(()=>{a&&(a.panTo(n),a.setZoom(19))},[a,n]),s.jsx("div",{className:"map-marker-on-map",children:s.jsxs(M,{ref:r,position:n,onClick:o,zIndex:1e3,children:[s.jsx("button",{className:"erf-no-btn",children:s.jsx("span",{className:"erf-no",children:t.erfNo})}),v&&s.jsx(T,{anchor:x,onClose:()=>c(!1),onCloseClick:()=>c(!1),children:s.jsx("div",{children:s.jsx(S,{data:{data:t}})})})]})})},H=e=>{const{activeTab:t,setActiveTab:a}=e,n=r=>{a(r.target.id)};return s.jsxs("div",{className:"asts-activity-header",children:[s.jsxs("div",{className:"aah aah-left",children:[s.jsx("button",{id:"possibleTrns",onClick:n,className:`aah-btn possible-trns ${t==="possibleTrns"?"active":""} `,children:"Possible Trns"}),s.jsx("button",{id:"meterhistory",onClick:n,className:`aah-btn meter-history ${t==="meterhistory"?"active":""}`,children:"Meter History"}),s.jsx("button",{id:"trnHistory",onClick:n,className:`aah-btn trn-history ${t==="trnHistory"?"active":""}`,children:"Trn History"})]}),s.jsxs("div",{className:"aah aah-right ",children:[s.jsx("button",{id:"timeline",onClick:n,className:`aah-btn timeline ${t==="timeline"?"active":""}`,children:"Timeline"}),s.jsx("button",{id:"comments",onClick:n,className:`aah-btn comments ${t==="comments"?"active":""}`,children:"Comments"}),s.jsx("button",{id:"media",onClick:n,className:`aah-btn media ${t==="media"?"active":""}`,children:"Media"})]})]})},E=e=>{const{activeTab:t}=e;return s.jsx("div",{className:"asts-activity-name-header",children:t})},W=e=>{var u;const{trnsNewFormData:t,trnsValidationSchema:a}=k(),{ast:n}=e,{trns:r,erf:x,astData:v}=n,{astNo:c,astId:o,astCatergory:d,astState:l,astManufacturer:m,astName:h,meter:p}=v,{phase:j,type:f}=p;return s.jsxs("div",{className:"ast-activity-trns",children:[s.jsx(E,{}),s.jsxs("div",{className:"trn-btns",children:[s.jsxs("div",{className:"btns-",children:[s.jsx(N,{data:{modalName:"meter-tid",data:{...t.meter.tid,astData:{astNo:c,astId:o,astCatergory:d},erf:x},validationSchema:a.meter.tid,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"TID transaction"},children:"Tid"}),s.jsx(N,{data:{modalName:"meter-inspection",data:{...t.meter.inspection,astData:{astNo:c,astState:l,astManufacturer:m,astName:h,astCatergory:d,astId:o,meter:{...(u=t.meter.inspection.astData)==null?void 0:u.meter,phase:j,type:f}},erf:x},validationSchema:a.meter.inspection,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"Meter Inspection"},children:"Insp"})]}),s.jsx("div",{className:"info",children:s.jsx("p",{children:"Click the desired button to launch the transaction "})})]})]})},g=e=>{const{title:t,content:a}=e;return s.jsxs("div",{className:"coming-soon",children:[s.jsx("h2",{className:"title",children:t}),s.jsx("h3",{children:"Coming Soon"}),s.jsx("p",{className:"content",children:a})]})},D=e=>s.jsx("div",{className:"ast-activity-trns",children:s.jsx(g,{title:"Meter History",content:`This display all activity that iREPS recorded 
		on a meter from when meter life started on to the end thus allowing lifetime tracking of an asset. 
		This will include installation or audit, inspection, tid, disconnection, reconnection, decommissioning and disposal.`})}),B=e=>{console.log("props",e);const{ast:t}=e;return s.jsx("div",{className:"ast-activity-trns",children:s.jsx(w,{data:{data:t}})})},$=e=>{console.log("props",e);const{ast:t}=e;return s.jsx("div",{className:"ast-activity-trns",children:s.jsx(A,{data:{data:t,displayMode:"modal",infoName:void 0,irepsKeyItem:"asts",tableBtnClass:void 0,validationSchema:void 0,width:"4rem"}})})},R=e=>(console.log("props",e),s.jsx("div",{className:"ast-activity-trns",children:"Meter Timeline"})),O=e=>(console.log("props",e),s.jsx("div",{className:"ast-activity-trns",children:s.jsx(g,{title:"Meter Comments",content:"This display all text comments recorded for the meter."})})),K=e=>{const{activeTab:t,ast:a}=e;return s.jsxs("div",{className:"asts-activity-body",children:[t==="possibleTrns"&&s.jsx(W,{ast:a}),t==="meterhistory"&&s.jsx(D,{ast:a}),t==="trnHistory"&&s.jsx(B,{ast:a}),t==="media"&&s.jsx($,{ast:a}),t==="timeline"&&s.jsx(R,{ast:a}),t==="comments"&&s.jsx(O,{ast:a})]})},P=e=>{const{data:t}=e==null?void 0:e.data,[a,n]=i.useState("possibleTrns");return s.jsxs("div",{className:"asts-activity",children:[s.jsx(K,{activeTab:a,ast:t}),s.jsx(H,{activeTab:a,setActiveTab:n,ast:t})]})},V=e=>{var h;console.log("props",e);const{ast:t}=e,a=t==null?void 0:t.erf;console.log("erf",a);const n=y(),r=i.useMemo(()=>{var p,j,f,u;return{lat:Number((j=(p=t==null?void 0:t.location)==null?void 0:p.gps)==null?void 0:j.lat),lng:Number((u=(f=t==null?void 0:t.location)==null?void 0:f.gps)==null?void 0:u.lng)}},[t]),[x,v]=b(),[c,o]=i.useState(!1);i.useEffect(()=>{if(n)return n.panTo(r),n.setZoom(19),()=>o(!1)},[n,r]);const d=i.useCallback(()=>o(!0),[]),{trns:l}=t,m=(l==null?void 0:l.length)||"";return s.jsxs("div",{className:"map-meter-on-map",children:[s.jsxs(M,{ref:x,position:r,onClick:d,children:[m&&s.jsx("button",{className:"ast-asts",children:m}),s.jsx("button",{className:"ast-no-btn",children:s.jsx("span",{className:"ast-no",children:(h=t==null?void 0:t.astData)==null?void 0:h.astNo})})]}),c&&s.jsx(T,{anchor:v,onClose:()=>o(!1),onCloseClick:()=>o(!1),children:s.jsx("div",{children:s.jsx(P,{data:{data:t}})})}),s.jsx(I,{erf:a})]})},q=()=>{const e=y(),{displayLMWardBoundaries:t,state:a}=C(),{lmWardBoundaries:n}=a;return i.useEffect(()=>{e&&t(e)},[e,n]),s.jsx("div",{className:"map-boundaries"})};export{q as M,V as a};
