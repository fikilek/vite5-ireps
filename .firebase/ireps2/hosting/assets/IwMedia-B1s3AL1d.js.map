{"version":3,"file":"IwMedia-B1s3AL1d.js","sources":["../../src/components/media/MediaMainDisplay.jsx","../../src/components/media/MediaBody.jsx","../../src/components/media/MediaFilter.jsx","../../src/components/media/MediaFilters.jsx","../../src/components/media/MediaFooter.jsx","../../src/components/media/Media.jsx","../../src/components/irepsInfoWindow/IwMedia.jsx"],"sourcesContent":["import { toast } from \"react-toastify\";\r\nimport { IconContext } from \"react-icons\";\r\nimport { useContext, useEffect } from \"react\";\r\nimport { ref } from \"firebase/storage\";\r\nimport { format } from \"date-fns\";\r\nimport { MdDeleteOutline } from \"react-icons/md\";\r\n\r\nimport \"@/components/media/MediaMainDisplay.css\";\r\n\r\nimport { useFirestore } from \"@/hooks/useFirestore.jsx\";\r\nimport useStorage from \"@/hooks/useStorage.jsx\";\r\nimport { storage } from \"@/firebaseConfig/fbConfig\";\r\n\r\nimport { constants } from \"@/utils/utils\";\r\nimport MediaMainDisplayHeader from \"@/components/media/MediaMainDisplayHeader\";\r\nimport { MediaContext } from \"@/contexts/MediaContext\";\r\n// import { ref } from \"firebase/storage\";\r\n// import useStorage from \"@/hooks/useStorage\";\r\n\r\nconst MediaMainDisplay = () => {\r\n\tconst { mediaData, setMediaData } = useContext(MediaContext);\r\n\tconsole.log(`mediaData`, mediaData);\r\n\r\n\tconst { deleteDocument, response } = useFirestore(\"media\");\r\n\r\n\tconst { deleteFile, success } = useStorage();\r\n\r\n\tconst selectedMedia = mediaData?.data[mediaData?.displayPosition];\r\n\t// console.log(`selectedMedia`, selectedMedia);\r\n\r\n\tconst src = mediaData?.data[mediaData?.displayPosition]?.url;\r\n\tconst alt = mediaData?.data?.metadata?.mediaCatergory;\r\n\r\n\tconst createdByUser =\r\n\t\tmediaData?.data[mediaData?.displayPosition]?.metadata?.createdByUser;\r\n\tconst timestamp =\r\n\t\tmediaData?.data[mediaData?.displayPosition]?.metadata?.createdAtDatetime;\r\n\t// console.log(`timestamp`, timestamp);\r\n\tlet createdAtDatetime = \"\";\r\n\tif (timestamp) {\r\n\t\tcreatedAtDatetime = format(timestamp?.toDate(), constants.dateFormat2);\r\n\t\t// console.log(`createdAtDatetime`, createdAtDatetime);\r\n\t}\r\n\r\n\tconst handleDelete = async (e) => {\r\n\t\t// console.log(`image to delte [${e.currentTarget.id}]`);\r\n\t\tconst id = e.currentTarget.id;\r\n\r\n\t\t// get image ref from url\r\n\t\ttry {\r\n\t\t\t// console.log(`storage`, storage);\r\n\t\t\tlet imageRef = ref(storage, selectedMedia.url);\r\n\t\t\t// console.log(`imageRef`, imageRef);\r\n\t\t\tawait deleteFile(imageRef, selectedMedia.id);\r\n\t\t\tawait deleteDocument(id);\r\n\t\t\tsetMediaData({\r\n\t\t\t\t...mediaData,\r\n\t\t\t\tdisplayPosition: 0,\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`Error deleting image ${error}`);\r\n\t\t\ttoast.error(`Error deleting image ${error}`, {\r\n\t\t\t\tposition: \"top-right\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (response.error) {\r\n\t\t\ttoast.error(response.error, {\r\n\t\t\t\tposition: \"top-right\",\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (response.document && success) {\r\n\t\t\ttoast.success(`Doc ${response.document} succesfully delete`, {\r\n\t\t\t\tposition: \"bottom-left\",\r\n\t\t\t});\r\n\t\t}\r\n\t}, [response, success]);\r\n\r\n\treturn (\r\n\t\t<div className=\"media-main-display\">\r\n\t\t\t<MediaMainDisplayHeader hl1={createdByUser} hr3={createdAtDatetime} />\r\n\r\n\t\t\t<div className=\"main-display-container\">\r\n\t\t\t\t{mediaData?.data?.length ? (\r\n\t\t\t\t\t<div className=\"image\">\r\n\t\t\t\t\t\t<img src={src} alt={alt} width={\"100%\"} height={\"100%\"} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p>No Image</p>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{/* mmd - media main display */}\r\n\t\t\t{selectedMedia && (\r\n\t\t\t\t<button\r\n\t\t\t\t\tid={selectedMedia?.id}\r\n\t\t\t\t\tclassName=\"mmd-delete-btn\"\r\n\t\t\t\t\tonClick={handleDelete}\r\n\t\t\t\t>\r\n\t\t\t\t\t<IconContext.Provider\r\n\t\t\t\t\t\tvalue={{ color: \"blue\", className: \"global-class-name\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<MdDeleteOutline />\r\n\t\t\t\t\t</IconContext.Provider>\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default MediaMainDisplay;\r\n","import \"@/components/media/MediaBody.css\";\n\nimport MediaMainDisplay from \"@/components/media/MediaMainDisplay\";\nimport MediaOnMap from \"@/components/media/MediaOnMap\";\n\nconst MediaBody = () => {\n\treturn (\n\t\t<div className=\"media-body\">\n\t\t\t<MediaMainDisplay />\n\t\t\t{/* <MediaMainDisplayMobile /> */}\n\t\t\t<MediaOnMap />\n\t\t</div>\n\t);\n};\n\nexport default MediaBody;\n","import { IconContext } from 'react-icons';\nimport { FaImage, FaMicrophone } from 'react-icons/fa';\n\nimport \"@/components/media/MediaFilter.css\";\n\nimport { IoIosVideocam } from 'react-icons/io';\n\nconst MediaFilter = (props) => {\n  const {filterTitle} = props\n  return (\n\t\t\t<div className=\"media-filter\">\n\t\t\t\t<div className='title'>{filterTitle}</div>\n\t\t\t\t<div className=\"media-filter-btn\">\n\t\t\t\t\t<button className=\"mfb mfb-photos\" title=\"take a photo with camera\">\n\t\t\t\t\t\t<IconContext.Provider value={{ color: \"blue\", fontSize: \"3rem\" }}>\n\t\t\t\t\t\t\t<FaImage />\n\t\t\t\t\t\t</IconContext.Provider>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span>3</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"media-filter-btn\">\n\t\t\t\t\t<button className=\"mfb mfb-voice-clips\" title=\"make a voice clip\">\n\t\t\t\t\t\t<IconContext.Provider value={{ color: \"blue\", fontSize: \"3rem\" }}>\n\t\t\t\t\t\t\t<FaMicrophone />\n\t\t\t\t\t\t</IconContext.Provider>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span>2</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"media-filter-btn\">\n\t\t\t\t\t<button className=\"mfb mfb-video-clips\" title=\"make a video clip\">\n\t\t\t\t\t\t<IconContext.Provider value={{ color: \"blue\", fontSize: \"3rem\" }}>\n\t\t\t\t\t\t\t<IoIosVideocam />\n\t\t\t\t\t\t</IconContext.Provider>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span>1</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n}\n\nexport default MediaFilter","import { useContext } from \"react\";\n\nimport \"@/components/media/MediaFilters.css\";\n\nimport MediaFilter from \"@/components/media/MediaFilter\";\nimport { MediaContext } from \"@/contexts/MediaContext\";\n\nconst MediaFilters = () => {\n\tconst { mediaData, setMediaData } = useContext(MediaContext);\n\t// console.log(`mediaData`, mediaData);\n\n\tconst totalMedia = mediaData.data.length;\n\n\treturn (\n\t\t<div className=\"media-filters\">\n\t\t\t<p className=\"title\">Total Media {totalMedia}</p>\n\t\t\t<div className=\"filters\">\n\t\t\t\t<MediaFilter filterTitle={\"Erf\"} />\n\t\t\t\t<MediaFilter filterTitle={\"Asts\"} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default MediaFilters;\n","import \"@/components/media/MediaFooter.css\";\n\nimport MediaFilters from \"@/components/media/MediaFilters\";\nimport MediaThumbnails from \"@/components/media/MediaThumbnails\";\n\nconst MediaFooter = props => {\n\tconst { data } = props;\n\treturn (\n\t\t<div className=\"media-footer\">\n\t\t\t<MediaFilters />\n\t\t\t<MediaThumbnails data={data} />\n\t\t</div>\n\t);\n};\n\nexport default MediaFooter;\n","import { useContext, useEffect } from \"react\";\n\n// css\nimport \"@/components/media/Media.css\";\n\n// custom hooks\nimport useCollection from \"@/hooks/useCollection.jsx\";\n\n// contexts\nimport { MediaContext } from \"@/contexts/MediaContext.jsx\";\n\n// components\nimport MediaBody from \"@/components/media/MediaBody\";\nimport MediaFooter from \"@/components/media/MediaFooter\";\nimport MediaAction from \"@/components/media/MediaAction\";\nimport { where } from \"firebase/firestore\";\n\nconst Media = props => {\n\t// console.log(`props`, props)\n\tconst { data } = props;\n\n\tconst { mediaData, setMediaData } = useContext(MediaContext);\n\t// console.log(`mediaData`, mediaData)\n\t\n\tconst constraints = useMemo(() => where(\"metadata.erfId\", \"==\", data.id), [data.id]);  \n\t// console.log(`constraints`, constraints)\n\n\tconst {\n\t\tdata: mediaInfo,\n\t\terror,\n\t\tisPending,\n\t\tsuccess,\n\t} = useCollection(\"media\", [constraints] );\n\t// console.log(`mediaInfo`, mediaInfo);\n\n\t// Media data\n\tuseEffect(() => {\n\t\tif (data) {\n\t\t\tsetMediaData({\n\t\t\t\t...mediaData,\n\t\t\t\tdata: mediaInfo,\n\t\t\t});\n\t\t}\n\t}, [mediaInfo]);\n\n\t// Erf data\n\tuseEffect(() => {\n\t\tif (data) {\n\t\t\tsetMediaData({\n\t\t\t\t...mediaData,\n\t\t\t\terfData: data,\n\t\t\t});\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<div className=\"media\">\n\t\t\t<MediaBody data={data} />\n\t\t\t<MediaFooter data={data} />\n\t\t\t<MediaAction data={data} />\n\t\t</div>\n\t);\n};\n\nexport default Media;\n","import \"@/components/irepsInfoWindow/IwMedia.css\";\n\nimport Media from \"@/components/media/Media\";\nimport MediaActionBtns from \"@/components/media/MediaActionBtns\";\nimport IrepsInfoWindow from \"@/components/irepsInfoWindow/IrepsInfoWindow\";\n\nconst IwMedia = props => {\n\t// console.log(`props`, props)\n\tconst { data } = props;\n\treturn (\n\t\t<IrepsInfoWindow\n\t\t\tfhl1={\"Media\"}\n\t\t\tfhl3={\n\t\t\t\t<span>\n\t\t\t\t\tErf No: <span className=\"data-emphasis\">{data.erfNo}</span>\n\t\t\t\t</span>\n\t\t\t}\n\t\t\tfhr1={<MediaActionBtns />}\n\t\t>\n\t\t\t<Media data={data} />\n\t\t</IrepsInfoWindow>\n\t);\n};\n\nexport default IwMedia;\n"],"names":["MediaMainDisplay","mediaData","setMediaData","useContext","MediaContext","deleteDocument","response","useFirestore","deleteFile","success","useStorage","selectedMedia","src","_a","alt","_c","_b","createdByUser","_e","_d","timestamp","_g","_f","createdAtDatetime","format","constants","handleDelete","e","id","imageRef","ref","storage","error","toast","useEffect","jsxs","jsx","MediaMainDisplayHeader","_h","IconContext","MdDeleteOutline","MediaBody","MediaOnMap","MediaFilter","props","filterTitle","FaImage","FaMicrophone","IoIosVideocam","MediaFilters","totalMedia","MediaFooter","data","MediaThumbnails","Media","constraints","where","mediaInfo","isPending","useCollection","MediaAction","IwMedia","IrepsInfoWindow","MediaActionBtns"],"mappings":"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"}