{"version":3,"file":"ShowOnMap-ClZuFawa.js","sources":["../../src/hooks/useDocument.jsx","../../src/components/irepsInfoWindow/ShowOnMap.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\n\nimport { db } from \"@/firebaseConfig/fbConfig\";\n\nexport const useDocument = (fbCollection, id) => {\n\t// console.log(`fbCollection`, fbCollection);\n\t// console.log(`id`, id);\n\n\tconst [document, setDocument] = useState(null);\n\tconst [error, setError] = useState(null);\n\t// console.log(`document`, document);\n\n\tuseEffect(() => {\n\t\tlet unsub = null;\n\t\tif (!id) return;\n\t\tconst docRef = doc(db, fbCollection, id);\n\t\t// console.log(`docRef`, docRef);\n\t\tunsub = onSnapshot(\n\t\t\tdocRef,\n\t\t\tsnapShot => {\n\t\t\t\t// console.log(`snapShot`, snapShot);\n\t\t\t\tsetDocument({ ...snapShot.data(), id: snapShot.id });\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tconsole.log(`document fetch error`, error.message);\n\t\t\t\tsetError(`Failed to get document`, id);\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tif (unsub) {\n\t\t\t\tunsub();\n\t\t\t}\n\t\t};\n\t}, [id, fbCollection]);\n\n\treturn { error, document };\n};\n","import { useEffect, useState } from \"react\";\n\nimport \"@/components/irepsInfoWindow/ShowOnMap.css\";\n\nimport IwShowOnMap from \"@/components/irepsInfoWindow/IwShowOnMap\";\nimport { useDocument } from \"@/hooks/useDocument\";\n\nconst ShowOnMap = props => {\n\t// console.log(`props`, props);\n\n\tconst { erfId, address } = props.data.data.erf;\n\t// console.log(`erfId`, erfId);\n\tconst { erf } = props.data.data;\n\n\tconst {lmMetro, ward} = address\n\n\tconst [gpsPoint, setGpsPoint] = useState({});\n\t// console.log(`gpsPoint`, gpsPoint);\n\n\tconst { error, document } = useDocument(\"erfs\", erfId);\n\t// console.log(`document`, document);\n\t// console.log(`error`, error);\n\n\tuseEffect(() => {\n\t\t// console.log(`document changed`, document);\n\t\tsetGpsPoint({\n\t\t\tpoint: {\n\t\t\t\tlat: document?.address?.gps?.latitude,\n\t\t\t\tlng: document?.address?.gps?.longitude,\n\t\t\t},\n\t\t\tlabel: document?.erfNo,\n\t\t});\n\t}, [document]);\n\n\treturn (\n\t\t<div className=\"show-on-map\">\n\t\t\t{gpsPoint?.point?.lat && (\n\t\t\t\t<IwShowOnMap\n\t\t\t\t\tlat={gpsPoint?.point?.lat}\n\t\t\t\t\tlng={gpsPoint?.point?.lng}\n\t\t\t\t\tlabel={gpsPoint?.label}\n\t\t\t\t\tward={ward}\n\t\t\t\t\tlmMetro={lmMetro}\n\t\t\t\t\terf={erf}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default ShowOnMap;\n"],"names":["useDocument","fbCollection","id","document","setDocument","useState","error","setError","useEffect","unsub","docRef","doc","db","onSnapshot","snapShot","ShowOnMap","props","erfId","address","erf","lmMetro","ward","gpsPoint","setGpsPoint","_b","_a","_d","_c","jsx","IwShowOnMap"],"mappings":"0wBAKa,MAAAA,EAAc,CAACC,EAAcC,IAAO,CAIhD,KAAM,CAACC,EAAUC,CAAW,EAAIC,WAAS,IAAI,EACvC,CAACC,EAAOC,CAAQ,EAAIF,WAAS,IAAI,EAGvCG,OAAAA,EAAAA,UAAU,IAAM,CACf,IAAIC,EAAQ,KACZ,GAAI,CAACP,EAAI,OACT,MAAMQ,EAASC,EAAIC,EAAIX,EAAcC,CAAE,EAE/B,OAAAO,EAAAI,EACPH,EACYI,GAAA,CAECV,EAAA,CAAE,GAAGU,EAAS,KAAA,EAAQ,GAAIA,EAAS,GAAI,CACpD,EACAR,GAAS,CACA,QAAA,IAAI,uBAAwBA,EAAM,OAAO,EACjDC,EAAS,yBAA0BL,CAAE,CACtC,CAAA,EAGM,IAAM,CACRO,GACGA,GACP,CACD,EACE,CAACP,EAAID,CAAY,CAAC,EAEd,CAAE,MAAAK,EAAO,SAAAH,EACjB,EC/BMY,EAAqBC,GAAA,WAG1B,KAAM,CAAE,MAAAC,EAAO,QAAAC,CAAY,EAAAF,EAAM,KAAK,KAAK,IAErC,CAAE,IAAAG,CAAQ,EAAAH,EAAM,KAAK,KAErB,CAAC,QAAAI,EAAS,KAAAC,CAAQ,EAAAH,EAElB,CAACI,EAAUC,CAAW,EAAIlB,EAAA,SAAS,CAAE,CAAA,EAGrC,CAAE,MAAAC,EAAO,SAAAH,CAAA,EAAaH,EAAY,OAAQiB,CAAK,EAIrDT,OAAAA,EAAAA,UAAU,IAAM,aAEHe,EAAA,CACX,MAAO,CACN,KAAKC,GAAAC,EAAAtB,GAAA,YAAAA,EAAU,UAAV,YAAAsB,EAAmB,MAAnB,YAAAD,EAAwB,SAC7B,KAAKE,GAAAC,EAAAxB,GAAA,YAAAA,EAAU,UAAV,YAAAwB,EAAmB,MAAnB,YAAAD,EAAwB,SAC9B,EACA,MAAOvB,GAAA,YAAAA,EAAU,KAAA,CACjB,CAAA,EACC,CAACA,CAAQ,CAAC,QAGX,MAAI,CAAA,UAAU,cACb,WAAAsB,EAAAH,GAAA,YAAAA,EAAU,QAAV,YAAAG,EAAiB,MACjBG,EAAA,IAACC,EAAA,CACA,KAAKL,EAAAF,GAAA,YAAAA,EAAU,QAAV,YAAAE,EAAiB,IACtB,KAAKG,EAAAL,GAAA,YAAAA,EAAU,QAAV,YAAAK,EAAiB,IACtB,MAAOL,GAAA,YAAAA,EAAU,MACjB,KAAAD,EACA,QAAAD,EACA,IAAAD,CAAA,CAGH,CAAA,CAAA,CAEF"}