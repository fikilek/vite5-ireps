import{D as b,r as n,B as g,a9 as f,j as e,ab as y,ac as w,ad as D,ae as S,af as M,ag as p,ah as a,ai as x,aj as F,ak as O,al as B}from"./index-Dyq_Y629.js";const A=r=>{var m;const{data:s,validationSchema:u}=r==null?void 0:r.data,{trnId:j}=s.metadata,{closeModal:h}=b(),[l,c]=n.useState(null),{response:o,setDocument:i}=g("trns"),[d,N]=n.useState((m=s==null?void 0:s.metadata)==null?void 0:m.trnState),v=n.useCallback(t=>{console.log("values",t),i({...t,metadata:{...t.metadata,trnState:d}},t.metadata.trnId)},[i,d]);return n.useEffect(()=>{o.success&&(h(),f("Transaction UPDATED successfully!",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},[o]),s?e.jsx("div",{className:"form-wrapper",children:e.jsxs("div",{className:"form-container trn form-meter-audit",children:[e.jsx(y,{initialValues:s,onSubmit:v,validationSchema:u,validateOnMount:!0,children:t=>(w(t,N),e.jsx(D,{children:e.jsxs("div",{className:"trn-form",children:[e.jsx(S,{hl1:e.jsxs("span",{children:["Meter ",e.jsx("span",{className:"text-emphasis2",children:"Audit"})," Form"]}),hr2:e.jsxs("span",{children:["Meter:",e.jsx("span",{className:"text-emphasis2",children:t.values.astData.astNo})]}),children:e.jsx(M,{})}),e.jsx(p,{sectionData:{sectionName:"meterDescription",formik:t},active:l,setActive:c,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-1 form-row",children:[e.jsx("div",{className:"",children:e.jsx(a,{control:"inputBarcodeScan",type:"text",label:"Meter No",name:"astData.astNo"})}),e.jsx("div",{className:"",children:e.jsx(a,{control:"mediaButton",type:"button",label:"meter no media",name:"astData.media.astNo",ml1:"asts"})}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(a,{control:"select",type:"text",label:"meter phase?",name:"astData.meter.phase",options:x.meterPhaseOptions}),e.jsx(a,{control:"select",type:"text",label:"meter type?",name:"astData.meter.type",options:x.meterTypeOptions})]}),e.jsx(a,{control:"input",type:"text",label:"manufacturer",name:"astData.astManufacturer"})]}),e.jsx("div",{className:"row-5 form-row",children:e.jsx(a,{control:"input",type:"text",label:"product name",name:"astData.astName"})})]})}),e.jsx(p,{sectionData:{sectionName:"meterLocation",formik:t},active:l,setActive:c,children:e.jsx("div",{className:"form-row-wrapper",children:e.jsxs("div",{className:"row-2 form-row",children:[e.jsx("div",{children:e.jsx(a,{control:"rgcButton",type:"button",label:"click for meter address",name:"location.address",placeholder:"Meter Address"})}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(a,{readOnly:!0,control:"input",type:"text",label:"gps(lat)",name:"location.gps.lat"}),e.jsx(a,{readOnly:!0,control:"input",type:"text",label:"gps(lng)",name:"location.gps.lng"})]})]})})}),t.values.metadata.trnState==="submitted"?"":e.jsx(F,{formik:t,signState:o})]})}))}),e.jsx(O,{geocoding:"ast"}),e.jsx(B,{data:{...r.data,irepsKeyItem:"trns",displayMode:"popup",trnId:j}})]})}):e.jsx("p",{children:"wait"})};export{A as default};
