{"version":3,"file":"AstsHeader-Cbjltpre.js","sources":["../../src/components/asts/AstsHeader.jsx"],"sourcesContent":["// npm library\r\nimport * as XLSX from \"xlsx/xlsx.mjs\";\r\n\r\n// css\r\nimport \"@/components/asts/AstsHeader.css\";\r\n\r\n// hooks\r\nimport { useUser } from \"@/hooks/useUser\";\r\nimport { useAsts } from \"@/hooks/useAsts\";\r\n\r\n// contexts\r\n\r\n// components\r\nimport PageTitle from \"@/pages/PageTitle\";\r\nimport FilterBtn from \"@/components/filters/FilterBtn\";\r\nimport useAuthContext from \"@/hooks/useAuthContext\";\r\n\r\nconst AstsHeader = (props) => {\r\n\tconst { phLl, context, setContext, tableRef } = props;\r\n\r\n\tconst { user } = useAuthContext();\r\n\t// console.log(`user`, user);\r\n\r\n\tconst { userFromUsers } = useUser(user.uid);\r\n\t// console.log(`userFromUsers`, userFromUsers);\r\n\r\n\tconst { createExportRowData } = useAsts();\r\n\r\n\tconst onPrint = (e) => {\r\n\t\t// console.log(`e`, e);\r\n\t\t// console.log(`tableRef.current`, tableRef.current);\r\n\r\n\t\tconst { rowData } = tableRef?.current?.props;\r\n\t\t// console.log(`rowData`, rowData);\r\n\r\n\t\tconst exportRowData = createExportRowData(rowData);\r\n\t\t// console.log(`exportRowData`, exportRowData);\r\n\r\n\t\t// tableRef.current.api.exportDataAsCsv();\r\n\r\n\t\t// Extract Data (create a workbook object from the table)\r\n\t\tconst wb = XLSX.utils.book_new();\r\n\t\tconst ws = XLSX.utils.json_to_sheet(exportRowData);\r\n\t\t// console.log(`ws`, ws);\r\n\r\n\t\t// // get and array from ws\r\n\t\t// const wsArray = Object.entries(ws);\r\n\t\t// console.log(`wsArray`, wsArray);\r\n\r\n\t\t// for (const property in ws) {\r\n\t\t// \tconsole.log(`Property BEFORE : `, property);\r\n\t\t// \tconst after = property.replace(/[^A-Za-z]/g, \"\");\r\n\t\t// \tconsole.log(`Property AFTER : `, after);\r\n\r\n\t\t// \tws[`${property}`].l = {\r\n\t\t// \t\tTarget: \"https://sheetjs.com\",\r\n\t\t// \t\t// Tooltip: \"Find us @ SheetJS.com!\",\r\n\t\t// \t};\r\n\r\n\t\t// \tconsole.log(ws[property]);\r\n\t\t// }\r\n\r\n\t\t// for (let i = 1; i < wsArray.length + 1; i++) {\r\n\t\t// \tconsole.log(`Row :`, i);\r\n\r\n\t\t// \tconsole.log(`rowData[${i}]`, rowData[i]);\r\n\t\t// \tws[\r\n\t\t// \t\tXLSX.utils.encode_cell({\r\n\t\t// \t\t\tc: 1,\r\n\t\t// \t\t\tr: i,\r\n\t\t// \t\t})\r\n\t\t// \t].l = { Target: \"https://google.com\" };\r\n\t\t// }\r\n\r\n\t\t// Process Data (add a new row)\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, \"meters\");\r\n\r\n\t\t// Package and Release Data (`writeFile` tries to write and save an XLSB file)\r\n\t\tXLSX.writeFile(wb, \"Report.xlsx\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"asts-header\">\r\n\t\t\t<div className=\"ph ph-left\">\r\n\t\t\t\t<div className=\"phLl\">\r\n\t\t\t\t\t<FilterBtn context={context} setContext={setContext} />\r\n\t\t\t\t\t<PageTitle title={phLl} />\r\n\t\t\t\t\t<PageTitle title={userFromUsers.workbase} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"phLr\"></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"ph ph-right\">\r\n\t\t\t\t<div className=\"phRl\"></div>\r\n\t\t\t\t<div className=\"phRr\">\r\n\t\t\t\t\t<button onClick={onPrint}>Export</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AstsHeader;\r\n"],"names":["AstsHeader","props","phLl","context","setContext","tableRef","user","useAuthContext","userFromUsers","useUser","createExportRowData","useAsts","onPrint","e","rowData","_a","exportRowData","wb","XLSX.utils","ws","XLSX.writeFile","jsxs","jsx","FilterBtn","PageTitle"],"mappings":"2kBAiBM,MAAAA,EAAcC,GAAU,CAC7B,KAAM,CAAE,KAAAC,EAAM,QAAAC,EAAS,WAAAC,EAAY,SAAAC,GAAaJ,EAE1C,CAAE,KAAAK,GAASC,IAGX,CAAE,cAAAC,CAAkB,EAAAC,EAAQH,EAAK,GAAG,EAGpC,CAAE,oBAAAI,GAAwBC,IAE1BC,EAAWC,GAAM,OAItB,KAAM,CAAE,QAAAC,CAAY,GAAAC,EAAAV,GAAA,YAAAA,EAAU,UAAV,YAAAU,EAAmB,MAGjCC,EAAgBN,EAAoBI,CAAO,EAM3CG,EAAKC,EAAW,WAChBC,EAAKD,EAAW,cAAcF,CAAa,EAiCjDE,EAAW,kBAAkBD,EAAIE,EAAI,QAAQ,EAGxCC,EAAUH,EAAI,aAAa,CAAA,EAIhC,OAAAI,EAAA,KAAC,MAAI,CAAA,UAAU,cACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,aACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACd,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAU,QAAApB,EAAkB,WAAAC,CAAwB,CAAA,EACrDkB,EAAAA,IAACE,EAAU,CAAA,MAAOtB,CAAM,CAAA,EACvBoB,EAAAA,IAAAE,EAAA,CAAU,MAAOhB,EAAc,QAAU,CAAA,CAAA,EAC3C,EACAc,EAAAA,IAAC,MAAI,CAAA,UAAU,MAAO,CAAA,CAAA,EACvB,EAEAD,EAAAA,KAAC,MAAI,CAAA,UAAU,cACd,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,MAAO,CAAA,EACtBA,EAAAA,IAAC,OAAI,UAAU,OACd,eAAC,SAAO,CAAA,QAASV,EAAS,SAAA,QAAA,CAAM,CACjC,CAAA,CAAA,EACD,CACD,CAAA,CAAA,CAEF"}