import{B as S,u as $,r as t,D as M,bL as j,am as C,a9 as E,j as e,ab as N,ad as y,ae as B,af as U,ap as z,ax as D,S as V,bM as A,I,bN as O,aq as R,aj as q}from"./index-2DC40iBv.js";import{u as G}from"./useSignup-W1hN5Mx1.js";const W=l=>{var b;const{response:n,getDocument:f}=S("users");$();const{uid:c}=(b=l==null?void 0:l.data)==null?void 0:b.data,[a,k]=t.useState({}),{closeModal:d}=M(),{updateUserObject:w,signupState:r}=G(),m=[];j&&j.forEach(s=>{m.push({label:s.lm,value:s.lm,data:s})});const g={workbases:a==null?void 0:a.workbases},p=s=>{w(s,c)};C({}),t.useEffect(()=>{r.success&&(d(),E.success(`User workbases for "${a.surname} ${a.name}", succesfully updated.`,{position:"bottom-left"}))},[r.success,d]),t.useEffect(()=>{n.success&&k(n.document)},[n]),t.useEffect(()=>{f(c)},[c]);const v=s=>(console.log("clearing selected value",s),null),F={control:s=>({...s,backgroundColor:"lightgray",padding:"0.11rem"}),option:(s,o)=>({...s,borderBottom:"1px dotted pink",color:o.isSelected?"white":"black",backgroundColor:o.isSelected?"hotpink":"white"})};return e.jsx("div",{className:"form-wrapper",children:e.jsx("div",{className:"form-container form-workbases",children:e.jsx(N,{initialValues:g,onSubmit:p,enableReinitialize:!0,children:s=>e.jsx(e.Fragment,{children:e.jsxs(y,{children:[e.jsx(B,{hl1:`${a.surname} ${a.name} workbases`,hr1:e.jsx("p",{children:a.workbase}),children:e.jsx(U,{})}),e.jsx(z,{msg:`Update user workbases allowed for the user: ${a.surname} ${a.name}`}),e.jsx("div",{className:"possible-workbases",children:e.jsx(D,{name:"workbases",render:o=>{var x,h;return e.jsxs("div",{className:"workbase-wrapper",children:[e.jsx(V,{defaultValue:"workbase",options:m,onChange:i=>{console.log("selection",i),o.push(i.value)},clearValue:v,styles:F}),((x=s.values)==null?void 0:x.workbases)&&((h=s.values)==null?void 0:h.workbases.map((i,u)=>e.jsxs("div",{className:"workbase-field",children:[e.jsx(A,{name:`workbases.${u}`}),e.jsx("button",{type:"button",onClick:()=>o.remove(u),children:e.jsx(I.Provider,{value:{color:"blue",fontSize:"2rem"},children:e.jsx(O,{})})})]},u)))]})}})}),r.error&&e.jsx(R,{errorMsg:r.error}),e.jsx(q,{formik:s,signState:r})]})})})})})};export{W as default};
