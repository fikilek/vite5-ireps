import{s as y,r as o,bf as N,j as t,t as M,v as T,n as b,bg as C}from"./index-Dyq_Y629.js";import{u as g}from"./useIrepsMap-gnSRCniL.js";import{b as k}from"./useTrns-BqU6BRGX.js";import w from"./IwTrnsOnAst-DRIe5Q2f.js";import S from"./FormErf-CkbiEYOQ.js";const I=e=>{const{erf:s}=e,a=y(),n=o.useMemo(()=>{var m,h,x,u;return{lat:(h=(m=s==null?void 0:s.address)==null?void 0:m.gps)==null?void 0:h.latitude,lng:(u=(x=s==null?void 0:s.address)==null?void 0:x.gps)==null?void 0:u.longitude}},[s]),i=s==null?void 0:s.asts,l=(i==null?void 0:i.length)||"",[j,v]=N(),[r,c]=o.useState(!1),d=o.useCallback(()=>c(!0),[]);return o.useEffect(()=>{a&&(a.panTo(n),a.setZoom(19))},[a,n]),t.jsx("div",{className:"map-marker-on-map",children:t.jsxs(M,{ref:j,position:n,onClick:d,zIndex:1e3,children:[l&&t.jsx("button",{className:"erf-asts",children:l}),t.jsx("button",{className:"erf-no-btn",children:t.jsx("span",{className:"erf-no",children:s.erfNo})}),r&&t.jsx(T,{anchor:v,onClose:()=>c(!1),onCloseClick:()=>c(!1),children:t.jsx("div",{children:t.jsx(S,{data:{data:s}})})})]})})},H=e=>{const{activeTab:s,setActiveTab:a}=e,n=i=>{a(i.target.id)};return t.jsxs("div",{className:"asts-activity-header",children:[t.jsxs("div",{className:"aah aah-left",children:[t.jsx("button",{id:"possibleTrns",onClick:n,className:`aah-btn possible-trns ${s==="possibleTrns"?"active":""} `,children:"Possible Trns"}),t.jsx("button",{id:"meterhistory",onClick:n,className:`aah-btn meter-history ${s==="meterhistory"?"active":""}`,children:"Meter History"}),t.jsx("button",{id:"trnHistory",onClick:n,className:`aah-btn trn-history ${s==="trnHistory"?"active":""}`,children:"Trn History"})]}),t.jsxs("div",{className:"aah aah-right ",children:[t.jsx("button",{id:"timeline",onClick:n,className:`aah-btn timeline ${s==="timeline"?"active":""}`,children:"Timeline"}),t.jsx("button",{id:"comments",onClick:n,className:`aah-btn comments ${s==="comments"?"active":""}`,children:"Comments"}),t.jsx("button",{id:"media",onClick:n,className:`aah-btn media ${s==="media"?"active":""}`,children:"Media"})]})]})},E=e=>{const{activeTab:s}=e;return t.jsx("div",{className:"asts-activity-name-header",children:s})},W=e=>{var p;const{trnsNewFormData:s,trnsValidationSchema:a}=k(),{ast:n}=e,{trns:i,erf:l,astData:j}=n,{astNo:v,astId:r,astCatergory:c,astState:d,astManufacturer:m,astName:h,meter:x}=j,{phase:u,type:f}=x;return t.jsxs("div",{className:"ast-activity-trns",children:[t.jsx(E,{}),t.jsxs("div",{className:"trn-btns",children:[t.jsxs("div",{className:"btns-",children:[t.jsx(b,{data:{modalName:"meter-tid",data:{...s.meter.tid,astData:{astNo:v,astId:r,astCatergory:c},erf:l},validationSchema:a.meter.tid,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"TID transaction"},children:"Tid"}),t.jsx(b,{data:{modalName:"meter-inspection",data:{...s.meter.inspection,astData:{astNo:v,astState:d,astManufacturer:m,astName:h,astCatergory:c,astId:r,meter:{...(p=s.meter.inspection.astData)==null?void 0:p.meter,phase:u,type:f}},erf:l},validationSchema:a.meter.inspection,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"Meter Inspection"},children:"Insp"})]}),t.jsx("div",{className:"info",children:t.jsx("p",{children:"Click the desired button to launch the transaction "})})]})]})},A=e=>{const{title:s,content:a}=e;return t.jsxs("div",{className:"coming-soon",children:[t.jsx("h2",{className:"title",children:s}),t.jsx("h3",{children:"Coming Soon"}),t.jsx("p",{className:"content",children:a})]})},D=e=>t.jsx("div",{className:"ast-activity-trns",children:t.jsx(A,{title:"Meter History",content:`This display all activity that iREPS recorded 
		on a meter from when meter life started on to the end thus allowing lifetime tracking of an asset. 
		This will include installation or audit, inspection, tid, disconnection, reconnection, decommissioning and disposal.`})}),B=e=>{console.log("props",e);const{ast:s}=e;return t.jsx("div",{className:"ast-activity-trns",children:t.jsx(w,{data:{data:s}})})},$=e=>{console.log("props",e);const{ast:s}=e;return t.jsx("div",{className:"ast-activity-trns",children:t.jsx(C,{data:{data:s,displayMode:"modal",infoName:void 0,irepsKeyItem:"asts",tableBtnClass:void 0,validationSchema:void 0,width:"4rem"}})})},R=e=>(console.log("props",e),t.jsx("div",{className:"ast-activity-trns",children:"Meter Timeline"})),O=e=>(console.log("props",e),t.jsx("div",{className:"ast-activity-trns",children:t.jsx(A,{title:"Meter Comments",content:"This display all text comments recorded for the meter."})})),K=e=>{const{activeTab:s,ast:a}=e;return t.jsxs("div",{className:"asts-activity-body",children:[s==="possibleTrns"&&t.jsx(W,{ast:a}),s==="meterhistory"&&t.jsx(D,{ast:a}),s==="trnHistory"&&t.jsx(B,{ast:a}),s==="media"&&t.jsx($,{ast:a}),s==="timeline"&&t.jsx(R,{ast:a}),s==="comments"&&t.jsx(O,{ast:a})]})},P=e=>{const{data:s}=e==null?void 0:e.data,[a,n]=o.useState("possibleTrns");return t.jsxs("div",{className:"asts-activity",children:[t.jsx(K,{activeTab:a,ast:s}),t.jsx(H,{activeTab:a,setActiveTab:n,ast:s})]})},V=e=>{var h;const{ast:s}=e,a=s==null?void 0:s.erf,n=y(),i=o.useMemo(()=>{var x,u,f,p;return{lat:Number((u=(x=s==null?void 0:s.location)==null?void 0:x.gps)==null?void 0:u.lat),lng:Number((p=(f=s==null?void 0:s.location)==null?void 0:f.gps)==null?void 0:p.lng)}},[s]),[l,j]=N(),[v,r]=o.useState(!1);o.useEffect(()=>{if(n)return n.panTo(i),n.setZoom(19),()=>r(!1)},[n,i]);const c=o.useCallback(()=>r(!0),[]),{trns:d}=s,m=(d==null?void 0:d.length)||"";return t.jsxs("div",{className:"map-meter-on-map",children:[t.jsxs(M,{ref:l,position:i,onClick:c,children:[m&&t.jsx("button",{className:"ast-asts",children:m}),t.jsx("button",{className:"ast-no-btn",children:t.jsx("span",{className:"ast-no",children:(h=s==null?void 0:s.astData)==null?void 0:h.astNo})})]}),v&&t.jsx(T,{anchor:j,onClose:()=>r(!1),onCloseClick:()=>r(!1),children:t.jsx("div",{children:t.jsx(P,{data:{data:s}})})}),t.jsx(I,{erf:a})]})},q=()=>{const e=y(),{displayLMWardBoundaries:s,state:a}=g(),{lmWardBoundaries:n}=a;return o.useEffect(()=>{e&&s(e)},[e,n]),t.jsx("div",{className:"map-boundaries"})};export{q as M,V as a,I as b};
