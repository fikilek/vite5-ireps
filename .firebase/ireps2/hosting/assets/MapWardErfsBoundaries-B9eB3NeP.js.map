{"version":3,"file":"MapWardErfsBoundaries-B9eB3NeP.js","sources":["../../src/components/maps/MapErfOnMap.jsx","../../src/components/maps/MapMeterOnMap.jsx","../../src/components/maps/MapWardErfsBoundaries.jsx"],"sourcesContent":["// npm libraries\r\nimport { useMemo } from \"react\";\r\nimport {\r\n\tAdvancedMarker,\r\n\tInfoWindow,\r\n\tPin,\r\n\tuseAdvancedMarkerRef,\r\n\tuseMap,\r\n} from \"@vis.gl/react-google-maps\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\nimport \"@/components/maps/MapErfOnMap.css\";\r\nimport \"@/components/maps/ErfMarker.css\";\r\n\r\nimport FormErf from \"@/components/forms/formErf/FormErf\";\r\n\r\nconst MapErfOnMap = (props) => {\r\n\t// console.log(`props`, props);\r\n\r\n\tconst { erf } = props;\r\n\tconst map = useMap();\r\n\r\n\tconst gpsPoint = useMemo(() => {\r\n\t\treturn {\r\n\t\t\tlat: erf?.address?.gps?.latitude,\r\n\t\t\tlng: erf?.address?.gps?.longitude,\r\n\t\t};\r\n\t}, [erf]);\r\n\r\n\tconst asts = erf?.asts;\r\n\tconst astTotal = asts?.length || \"\";\r\n\r\n\tconst [markerRef, marker] = useAdvancedMarkerRef();\r\n\r\n\tconst [infoWindowShown, setInfoWindowShown] = useState(false);\r\n\r\n\t// clicking the marker will toggle the infowindow\r\n\tconst handleMarkerClick = useCallback(() => setInfoWindowShown(true), []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!map) return;\r\n\t\t// console.log(`map`, map);\r\n\t\tmap.panTo(gpsPoint);\r\n\t\tmap.setZoom(19);\r\n\t}, [map, gpsPoint]);\r\n\r\n\treturn (\r\n\t\t<div className=\"map-marker-on-map\">\r\n\t\t\t<AdvancedMarker\r\n\t\t\t\tref={markerRef}\r\n\t\t\t\tposition={gpsPoint}\r\n\t\t\t\t// onClick={handleMarkerClick}\r\n\t\t\t\tzIndex={1000}\r\n\t\t\t>\r\n\t\t\t\t{astTotal && <button className=\"erf-asts\">{astTotal}</button>}\r\n\t\t\t\t<button className=\"erf-no-btn\">\r\n\t\t\t\t\t<span className=\"erf-no\">{erf.erfNo}</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{infoWindowShown && (\r\n\t\t\t\t\t<InfoWindow\r\n\t\t\t\t\t\tanchor={marker}\r\n\t\t\t\t\t\tonClose={() => setInfoWindowShown(false)}\r\n\t\t\t\t\t\tonCloseClick={() => setInfoWindowShown(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<FormErf\r\n\t\t\t\t\t\t\t\tdata={{\r\n\t\t\t\t\t\t\t\t\tdata: erf,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</InfoWindow>\r\n\t\t\t\t)}\r\n\t\t\t</AdvancedMarker>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MapErfOnMap;\r\n","// npm libraries\r\nimport { useEffect, useState, useCallback, useMemo } from \"react\";\r\nimport {\r\n\tuseMap,\r\n\tuseAdvancedMarkerRef,\r\n\tAdvancedMarker,\r\n\tInfoWindow,\r\n} from \"@vis.gl/react-google-maps\";\r\n\r\n// css\r\nimport \"@/components/maps/MapMeterOnMap.css\";\r\n\r\n// components\r\nimport AstsActivity from \"@/components/asts/astsActivity/AstsActivity\";\r\nimport MapErfOnMap from \"@/components/maps/MapErfOnMap\";\r\n\r\nconst MapMeterOnMap = (props) => {\r\n\t// console.log(`props`, props);\r\n\r\n\tconst { ast } = props;\r\n\tconst erf = ast?.erf;\r\n\t// console.log(`erf`, erf);\r\n\r\n\tconst map = useMap();\r\n\r\n\tconst meterGps = useMemo(() => {\r\n\t\treturn {\r\n\t\t\tlat: Number(ast?.location?.gps?.lat),\r\n\t\t\tlng: Number(ast?.location?.gps?.lng),\r\n\t\t};\r\n\t}, [ast]);\r\n\r\n\t// `markerRef` and `marker` are needed to establish the connection between\r\n\t// the marker and infowindow (if you're using the Marker component, you\r\n\t// can use the `useMarkerRef` hook instead).\r\n\tconst [markerRef, marker] = useAdvancedMarkerRef();\r\n\r\n\tconst [infoWindowShown, setInfoWindowShown] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!map) return;\r\n\t\t// console.log(`map`, map);\r\n\t\tmap.panTo(meterGps);\r\n\t\tmap.setZoom(19);\r\n\t\treturn () => setInfoWindowShown(false);\r\n\t}, [map, meterGps]);\r\n\r\n\t// clicking the marker will open the infowindow\r\n\tconst handleOpen = useCallback(() => setInfoWindowShown(true), []);\r\n\r\n\tconst { trns } = ast;\r\n\tconst totalTrns = trns?.length || \"\";\r\n\r\n\treturn (\r\n\t\t<div className=\"map-meter-on-map\">\r\n\t\t\t<AdvancedMarker\r\n\t\t\t\tref={markerRef}\r\n\t\t\t\tposition={meterGps}\r\n\t\t\t\t// onClick={handleOpen}\r\n\t\t\t>\r\n\t\t\t\t{totalTrns && <button className=\"ast-asts\">{totalTrns}</button>}\r\n\t\t\t\t<button className=\"ast-no-btn\">\r\n\t\t\t\t\t<span className=\"ast-no\">{ast?.astData?.astNo}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</AdvancedMarker>\r\n\r\n\t\t\t{infoWindowShown && (\r\n\t\t\t\t<InfoWindow\r\n\t\t\t\t\tanchor={marker}\r\n\t\t\t\t\tonClose={() => setInfoWindowShown(false)}\r\n\t\t\t\t\tonCloseClick={() => setInfoWindowShown(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<AstsActivity\r\n\t\t\t\t\t\t\tdata={{\r\n\t\t\t\t\t\t\t\tdata: ast,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InfoWindow>\r\n\t\t\t)}\r\n\r\n\t\t\t<MapErfOnMap erf={erf} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MapMeterOnMap;\r\n","import { useEffect } from \"react\";\n\n// hooks\nimport useIrepsMap from \"@/hooks/useIrepsMap\";\nimport { useMap } from \"@vis.gl/react-google-maps\";\n\n// Display all ward boundaries in workbase(municipality) and erfs of the props ward\nconst MapWardErfsBoundaries = () => {\n\t// console.log(`props`, props);\n\n\tconst map = useMap();\n\t// console.log(`map`, map);\n\n\tconst { displayLMWardBoundaries, state } = useIrepsMap();\n\t// console.log(`displayLMWardBoundaries`, displayLMWardBoundaries)\n\n\tconst { lmWardBoundaries } = state;\n\n\tuseEffect(() => {\n\n\t\tif (!map) return;\n\n\t\tdisplayLMWardBoundaries(map);\n\n\t}, [map, lmWardBoundaries]);\n\n\treturn <div className=\"map-boundaries\"></div>;\n};\n\nexport default MapWardErfsBoundaries;\n"],"names":["MapErfOnMap","props","erf","map","useMap","gpsPoint","useMemo","_b","_a","_d","_c","asts","astTotal","markerRef","marker","useAdvancedMarkerRef","infoWindowShown","setInfoWindowShown","useState","useCallback","useEffect","jsx","jsxs","AdvancedMarker","InfoWindow","FormErf","MapMeterOnMap","ast","meterGps","trns","totalTrns","AstsActivity","MapWardErfsBoundaries","displayLMWardBoundaries","state","useIrepsMap","lmWardBoundaries"],"mappings":"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"}