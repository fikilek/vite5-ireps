import{r as l,c as g,d as h,q as i,w as p,az as m,J as y,an as N,ao as E,B as u,j as o,ac as b,ae as x,af as S,aq as j,ai as C,ar as w,ak as F}from"./index-6XIBjwph.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f72d99b0-4522-4192-9afa-bf9d0d0b0179",e._sentryDebugIdIdentifier="sentry-dbid-f72d99b0-4522-4192-9afa-bf9d0d0b0179")}catch{}const I={data:[],error:null,isPending:null,success:null},R=(e,r)=>{switch(r.type){default:return e;case"IS_PENDING":return{data:[],isPending:!0,success:!1,error:""};case"SUCCESS":return{data:r.payload,error:!1,isPending:!1,success:!0};case"ERROR":return{data:[],isPending:!1,success:!1,error:r.payoad}}},D=e=>{const[r,a]=l.useReducer(R,I);let s=g(h,e);return{state:r,getCollectionCount:async c=>{let n;c?n=i(s,p(...c)):n=i(s),a({type:"IS_PENDING"}),m(n).then(t=>{const f=t.data().count;console.log("count",f),a({type:"SUCCESS",payload:f})}).catch(t=>{console.log("firestore err",t.message),a({type:"ERROR",payload:t.message})})}}},P=()=>{const{closeModal:e}=y(),[r,a]=l.useState(null);console.log("erfNo",r);const{state:s,getCollection:d}=D("erfs"),c=t=>{d(["erfNo","==",t.erfNo.trim()])},n=N({erfNo:E().required("Ast No is required.")});return l.useEffect(()=>{s.success&&s.data.length>0&&(e(),u.success(`Erf No "${r}", succesfully found`,{position:"bottom-left"})),s.success&&s.data.length===0&&(e(),u.warn(`Erf No "${r}", NOT found`,{position:"top-left"}),d())},[s.success,e]),l.useEffect(()=>{s.error&&console.log("state.error",s.error)},[s.error]),o.jsx("div",{className:"form-wrapper",children:o.jsx("div",{className:"form-container erfs-search",children:o.jsx(b,{initialValues:{erfNo:""},onSubmit:c,validationSchema:n,children:t=>(a(t.values.erfNo),o.jsx(o.Fragment,{children:o.jsxs(x,{children:[o.jsx(S,{hl1:"Erfs Search"}),o.jsx(j,{msg:"Enter the Erf No to search for."}),o.jsx("div",{className:"search-erfs-form",children:o.jsx(C,{control:"input",type:"text",label:"Erf NO",name:"erfNo",placeholder:"",autoFocus:!0})}),s.error&&o.jsx(w,{errorMsg:s.error}),o.jsx(F,{formik:t,signState:s})]})}))})})})};export{P as default};
//# sourceMappingURL=FormErfsSearch-DHYxsNfI.js.map
