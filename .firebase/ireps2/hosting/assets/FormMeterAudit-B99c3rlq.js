import{u as B,J as F,r as p,N as I,B as P,j as e,ac as G,ad as T,ae as E,af as R,ag as _,ah as c,ai as t,aj as a,ak as H,al as z,am as L}from"./index-6XIBjwph.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new n.Error().stack;o&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[o]="4a8e6b2a-8ccd-4ac0-87cc-984475ece577",n._sentryDebugIdIdentifier="sentry-dbid-4a8e6b2a-8ccd-4ac0-87cc-984475ece577")}catch{}const K=n=>{var y;const{data:o,validationSchema:v}=n==null?void 0:n.data,{erfNo:u,erfId:D,address:g}=o.erf,{user:x}=B(),O=x==null?void 0:x.claims,{trnId:S}=o.metadata,{closeModal:A}=F(),[r,l]=p.useState(null),{response:j,setDocument:b}=I("trns"),[h,C]=p.useState((y=o==null?void 0:o.metadata)==null?void 0:y.trnState),M=p.useCallback(s=>{var i,d,f,w,N;const m={...s,metadata:{...s.metadata,trnState:h},astData:{...s.astData,meter:{...s.astData.meter,seal:{...s.astData.meter.seal,sealNo:(N=(w=(f=(d=(i=s==null?void 0:s.astData)==null?void 0:i.meter)==null?void 0:d.seal)==null?void 0:f.sealNo)==null?void 0:w.trim())==null?void 0:N.replace(/\s/g,"")}}}};b(m,s.metadata.trnId)},[b,h]);return p.useEffect(()=>{j.success&&(A(),P("Transaction UPDATED successfully!",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},[j]),o?e.jsx("div",{className:"form-wrapper",children:e.jsxs("div",{className:"form-container trn form-meter-audit",children:[e.jsx(G,{initialValues:{...o,erf:{...o==null?void 0:o.erf,erfNo:u,erfId:D,address:g}},onSubmit:M,validationSchema:v,validateOnMount:!0,children:s=>{var d;const{meterAccess:m}=(d=s.values)==null?void 0:d.access;let i="show";return(m==="yes"||m==="choose"||m==="")&&(i="hide"),T(s,C),e.jsx(E,{children:e.jsxs("div",{className:"trn-form",children:[e.jsx(R,{hl1:e.jsxs("span",{children:["Erf:",e.jsx("span",{className:"text-emphasis2",children:u})]}),hl2:e.jsx("span",{}),hl3:e.jsx("span",{className:"text-emphasis2",children:h||"draft"}),hr1:e.jsxs("span",{children:["Mn:",e.jsx("span",{className:"text-emphasis2",children:s.values.astData.astNo})]}),hr2:e.jsx("span",{}),children:e.jsx(_,{})}),e.jsx(c,{sectionData:{sectionName:"access",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-0 form-row",children:[e.jsx(t,{control:"selectMeterAccess",type:"text",label:"was there access to the meter?",name:"access.meterAccess",options:a.yesNoOptions}),e.jsx(t,{control:"selectNoAccessReason",type:"text",label:"meter no access reasons",name:"access.noAccessReason",options:a.keyPadNoAccessOptions,showHide:i})]}),e.jsxs("div",{className:"row-0 form-row",children:[e.jsx("div",{}),e.jsx(t,{control:"mediaButton",type:"button",label:"no access media",name:"astData.media.noAccess",ml1:"asts",mediaCat:"noAccess",showHide:i})]})]})}),e.jsx(c,{sectionData:{sectionName:"meterDescription",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-1 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"input",type:"text",label:"Meter No",name:"astData.astNo"}),e.jsx(t,{control:"mediaButton",type:"button",label:"meter no media",name:"astData.media.astNo",ml1:"asts"})]}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"meter phase?",name:"astData.meter.phase",options:a.meterPhaseOptions}),e.jsx(t,{control:"select",type:"text",label:"meter type?",name:"astData.meter.type",options:a.meterTypeOptions})]})]}),e.jsxs("div",{className:"row-5 form-row",children:[e.jsx(t,{control:"input",type:"text",label:"manufacturer",name:"astData.astManufacturer"}),e.jsx(t,{control:"input",type:"text",label:"product name",name:"astData.astName"})]})]})}),e.jsx(c,{sectionData:{sectionName:"meterLocation",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-2 form-row",children:[e.jsx("div",{children:e.jsx(t,{control:"rgcButton",type:"button",label:"click for meter address",name:"location.address",placeholder:"Meter Address"})}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{readOnly:!0,control:"input",type:"text",label:"gps(lat)",name:"location.gps.lat"}),e.jsx(t,{readOnly:!0,control:"input",type:"text",label:"gps(lng)",name:"location.gps.lng"})]})]}),e.jsxs("div",{className:"row-3 form-row",children:[e.jsx("div",{children:e.jsx(t,{control:"select",type:"text",label:"Meter Placement",name:"location.placement",options:a.astLocationPlacementOptions})}),e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"Placement media",name:"astData.media.insideBox",ml1:"asts"})})]})]})}),e.jsx(c,{sectionData:{sectionName:"anomalies",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-4 form-row",children:[e.jsx(t,{control:"selectSetAnomaly",type:"text",label:"anomaly",name:"anomalies.anomaly",options:a.anomaliesOptions}),e.jsx(t,{control:"selectSetAnomalyDetail",type:"text",label:"anomaly detail",name:"anomalies.anomalyDetail"})]}),e.jsx("div",{className:"row-5 form-row",children:e.jsx(t,{control:"mediaButton",type:"button",label:"anomaly media",name:"astData.media.anomaly"})})]})}),e.jsx(c,{sectionData:{sectionName:"serviceConnection",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-4 form-row",children:[e.jsx(t,{control:"select",type:"text",label:"service connection status",name:"serviceConnection.configuration",options:a.serviceConnectionStatusOptions}),e.jsx(t,{control:"selectOffGridSupply",type:"text",label:"Off Grid Supply?",name:"serviceConnection.offGridSupply",options:a.yesNoOptions})]}),e.jsxs("div",{className:"row-0 form-row",children:[e.jsx("div",{}),e.jsx(t,{control:"mediaButton",type:"button",label:"Off Grid Photo",name:"astData.media.offGridPhoto",mediaCat:"offGridPhoto",ml1:"erfs"})]})]})}),e.jsx(c,{sectionData:{sectionName:"cb",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-6 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"is there cb?",name:"astData.meter.cb.isThereCb",options:a.yesNoNotSureOptions}),e.jsx(t,{control:"input",type:"number",label:"size (Amps)",name:"astData.meter.cb.size"})]}),e.jsx(t,{control:"select",type:"text",label:"cb comment",name:"astData.meter.cb.comment",options:a.cbCommentsOptions})]}),e.jsx("div",{className:"row-7 form-row",children:e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"cb media",name:"astData.media.cb"})})})]})}),e.jsx(c,{sectionData:{sectionName:"seal",formik:s},active:r,setActive:l,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-8 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"meter sealed?",name:"astData.meter.seal.meterSealed",options:a.yesNoOptions}),e.jsx(t,{control:"inputSealNumber",type:"text",label:"seal no",name:"astData.meter.seal.sealNo"})]}),e.jsx(t,{control:"select",type:"text",label:"seal comment",name:"astData.meter.seal.comment",options:a.sealCommentOptions})]}),e.jsx("div",{className:"row-9 form-row",children:e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"seal media",name:"astData.media.seal",ml1:"asts"})})})]})}),e.jsx(c,{sectionData:{sectionName:"tid",formik:s},active:r,setActive:l,children:e.jsx("div",{className:"form-row-wrapper",children:e.jsxs("div",{className:"row-8 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"tid status?",name:"tid.status",options:a.krnOptions}),e.jsx(t,{control:"input",type:"text",label:"tid status comment",name:"tid.statusComment",options:a.tidStatusCommentOptions})]}),e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"tid status",name:"astData.media.tidStatus",ml1:"asts"})})]})})}),e.jsx(c,{sectionData:{sectionName:"erf",formik:s},active:r,setActive:l,hideShow:"hide",children:e.jsx("div",{className:"form-row-wrapper",children:e.jsxs("div",{className:"row-8 form-row",children:[e.jsx(t,{control:"input",type:"text",label:"erf no",name:"erf.erfNo",readOnly:!0}),e.jsx(t,{control:"input",type:"text",label:"erf id",name:"erf.erfId",readOnly:!0})]})})}),s.values.metadata.trnState==="submitted"||O.guest?"":e.jsx(H,{formik:s,signState:j})]})})}}),e.jsx(z,{geocoding:"ast"}),e.jsx(L,{data:{...n.data,irepsKeyItem:"trns",displayMode:"popup",trnId:S}})]})}):e.jsx("p",{children:"wait"})};export{K as default};
//# sourceMappingURL=FormMeterAudit-B99c3rlq.js.map
