import{u as A,D as C,r as i,B,a9 as M,j as e,ab as F,ac as P,ad as G,ae as E,af as I,ag as l,ah as t,ai as a,aj as T,ak as R,al as H}from"./index-Dyq_Y629.js";const L=c=>{var w;const{data:o,validationSchema:b}=c==null?void 0:c.data,{erfNo:h,erfId:y,address:f}=o.erf,{user:m}=A(),v=m==null?void 0:m.claims,{trnId:D}=o.metadata,{closeModal:O}=C(),[n,r]=i.useState(null),{response:d,setDocument:u}=B("trns"),[p,S]=i.useState((w=o==null?void 0:o.metadata)==null?void 0:w.trnState),g=i.useCallback(s=>{u({...s,metadata:{...s.metadata,trnState:p}},s.metadata.trnId)},[u,p]);return i.useEffect(()=>{d.success&&(O(),M("Transaction UPDATED successfully!",{position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))},[d]),o?e.jsx("div",{className:"form-wrapper",children:e.jsxs("div",{className:"form-container trn form-meter-audit",children:[e.jsx(F,{initialValues:{...o,erf:{...o==null?void 0:o.erf,erfNo:h,erfId:y,address:f}},onSubmit:g,validationSchema:b,validateOnMount:!0,children:s=>{var N;const{meterAccess:x}=(N=s.values)==null?void 0:N.access;let j="show";return(x==="yes"||x==="choose"||x==="")&&(j="hide"),P(s,S),e.jsx(G,{children:e.jsxs("div",{className:"trn-form",children:[e.jsx(E,{hl1:e.jsx("span",{className:"text-emphasis2",children:"Audit"}),hl2:e.jsxs("span",{children:["Erf:",e.jsx("span",{className:"text-emphasis2",children:h})]}),hl3:e.jsx("span",{className:"text-emphasis2",children:p||"draft"}),hr2:e.jsxs("span",{children:["Meter:",e.jsx("span",{className:"text-emphasis2",children:s.values.astData.astNo})]}),children:e.jsx(I,{})}),e.jsx(l,{sectionData:{sectionName:"access",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-0 form-row",children:[e.jsx(t,{control:"selectMeterAccess",type:"text",label:"was there access to the meter?",name:"access.meterAccess",options:a.yesNoOptions}),e.jsx(t,{control:"selectNoAccessReason",type:"text",label:"meter no access reasons",name:"access.noAccessReason",options:a.keyPadNoAccessOptions,showHide:j})]}),e.jsxs("div",{className:"row-0 form-row",children:[e.jsx("div",{}),e.jsx(t,{control:"mediaButton",type:"button",label:"no access media",name:"astData.media.noAccess",ml1:"asts",mediaCat:"noAccess",showHide:j})]})]})}),e.jsx(l,{sectionData:{sectionName:"meterDescription",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-1 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"input",type:"text",label:"Meter No",name:"astData.astNo"}),e.jsx(t,{control:"mediaButton",type:"button",label:"meter no media",name:"astData.media.astNo",ml1:"asts"})]}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"meter phase?",name:"astData.meter.phase",options:a.meterPhaseOptions}),e.jsx(t,{control:"select",type:"text",label:"meter type?",name:"astData.meter.type",options:a.meterTypeOptions})]})]}),e.jsxs("div",{className:"row-5 form-row",children:[e.jsx(t,{control:"input",type:"text",label:"manufacturer",name:"astData.astManufacturer"}),e.jsx(t,{control:"input",type:"text",label:"product name",name:"astData.astName"})]})]})}),e.jsx(l,{sectionData:{sectionName:"meterLocation",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-2 form-row",children:[e.jsx("div",{children:e.jsx(t,{control:"rgcButton",type:"button",label:"click for meter address",name:"location.address",placeholder:"Meter Address"})}),e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{readOnly:!0,control:"input",type:"text",label:"gps(lat)",name:"location.gps.lat"}),e.jsx(t,{readOnly:!0,control:"input",type:"text",label:"gps(lng)",name:"location.gps.lng"})]})]}),e.jsxs("div",{className:"row-3 form-row",children:[e.jsx("div",{children:e.jsx(t,{control:"select",type:"text",label:"Meter Placement",name:"location.placement",options:a.astLocationPlacementOptions})}),e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"Placement media",name:"astData.media.insideBox",ml1:"asts"})})]})]})}),e.jsx(l,{sectionData:{sectionName:"anomalies",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-4 form-row",children:[e.jsx(t,{control:"selectSetAnomaly",type:"text",label:"anomaly",name:"anomalies.anomaly",options:a.anomaliesOptions}),e.jsx(t,{control:"selectSetAnomalyDetail",type:"text",label:"anomaly detail",name:"anomalies.anomalyDetail"})]}),e.jsx("div",{className:"row-5 form-row",children:e.jsx(t,{control:"mediaButton",type:"button",label:"anomaly media",name:"astData.media.anomaly"})})]})}),e.jsx(l,{sectionData:{sectionName:"serviceConnection",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-4 form-row",children:[e.jsx(t,{control:"select",type:"text",label:"service connection status",name:"serviceConnection.configuration",options:a.serviceConnectionStatusOptions}),e.jsx(t,{control:"selectOffGridSupply",type:"text",label:"Off Grid Supply?",name:"serviceConnection.offGridSupply",options:a.yesNoOptions})]}),e.jsxs("div",{className:"row-0 form-row",children:[e.jsx("div",{}),e.jsx(t,{control:"mediaButton",type:"button",label:"Off Grid Photo",name:"astData.media.offGridPhoto",mediaCat:"offGridPhoto",ml1:"erfs"})]})]})}),e.jsx(l,{sectionData:{sectionName:"cb",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-6 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"is there cb?",name:"astData.meter.cb.isThereCb",options:a.yesNoNotSureOptions}),e.jsx(t,{control:"input",type:"number",label:"size (Amps)",name:"astData.meter.cb.size"})]}),e.jsx(t,{control:"select",type:"text",label:"cb comment",name:"astData.meter.cb.comment",options:a.cbCommentsOptions})]}),e.jsx("div",{className:"row-7 form-row",children:e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"cb media",name:"astData.media.cb"})})})]})}),e.jsx(l,{sectionData:{sectionName:"seal",formik:s},active:n,setActive:r,children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsxs("div",{className:"row-8 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"meter sealed?",name:"astData.meter.seal.meterSealed",options:a.yesNoOptions}),e.jsx(t,{control:"input",type:"text",label:"seal no",name:"astData.meter.seal.sealNo"})]}),e.jsx(t,{control:"select",type:"text",label:"seal comment",name:"astData.meter.seal.comment",options:a.sealCommentOptions})]}),e.jsx("div",{className:"row-9 form-row",children:e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"seal media",name:"astData.media.seal",ml1:"asts"})})})]})}),e.jsx(l,{sectionData:{sectionName:"tid",formik:s},active:n,setActive:r,children:e.jsx("div",{className:"form-row-wrapper",children:e.jsxs("div",{className:"row-8 form-row",children:[e.jsxs("div",{className:"row-50-50",children:[e.jsx(t,{control:"select",type:"text",label:"tid status?",name:"tid.status",options:a.krnOptions}),e.jsx(t,{control:"input",type:"text",label:"tid status comment",name:"tid.statusComment",options:a.tidStatusCommentOptions})]}),e.jsx("div",{children:e.jsx(t,{control:"mediaButton",type:"button",label:"tid status",name:"astData.media.tidStatus",ml1:"asts"})})]})})}),e.jsx(l,{sectionData:{sectionName:"erf",formik:s},active:n,setActive:r,hideShow:"hide",children:e.jsx("div",{className:"form-row-wrapper",children:e.jsxs("div",{className:"row-8 form-row",children:[e.jsx(t,{control:"input",type:"text",label:"erf no",name:"erf.erfNo",readOnly:!0}),e.jsx(t,{control:"input",type:"text",label:"erf id",name:"erf.erfId",readOnly:!0})]})})}),s.values.metadata.trnState==="submitted"||v.guest?"":e.jsx(T,{formik:s,signState:d})]})})}}),e.jsx(R,{geocoding:"ast"}),e.jsx(H,{data:{...c.data,irepsKeyItem:"trns",displayMode:"popup",trnId:D}})]})}):e.jsx("p",{children:"wait"})};export{L as default};
