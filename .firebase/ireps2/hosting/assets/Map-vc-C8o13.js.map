{"version":3,"file":"Map-vc-C8o13.js","sources":["../../src/components/maps/MapLmWardBoundaries.jsx","../../src/components/maps/MapLmBoundary.jsx","../../src/components/maps/ErfMarker.jsx","../../src/components/maps/ClusteredErfMarkers.jsx","../../src/components/maps/AstMarker.jsx","../../src/components/maps/ClusteredAstMarkers.jsx","../../src/components/maps/MapAstFilter.jsx","../../src/components/maps/MapErfFilter.jsx","../../src/components/map/MapMain.jsx","../../src/components/map/MapHeader.jsx","../../src/pages/map/Map.jsx"],"sourcesContent":["// npm libraries\r\nimport { useEffect, useContext } from \"react\";\r\n\r\n// css\r\nimport \"@/components/maps/MapLmWardBoundaries.css\";\r\n\r\n// hooks\r\nimport useIrepsMap from \"@/hooks/useIrepsMap\";\r\nimport { useMap, MapControl, ControlPosition } from \"@vis.gl/react-google-maps\";\r\n\r\n// context\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\nconst MapLmWardBoundaries = () => {\r\n\t// console.log(`MapLmWardBoundaries`);\r\n\r\n\tconst { erfsContext, setErfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst map = useMap();\r\n\t// console.log(`map`, map);\r\n\r\n\t// const maps = useMapsLibrary('maps');\r\n\t// console.log(`maps`, maps);\r\n\r\n\tconst {\r\n\t\tdisplayLMWardBoundaries,\r\n\t\tstate,\r\n\t\tfitWardBoundary,\r\n\t\tdisplayLmBoundary,\r\n\t\t// setSelectedWardBoundaries,\r\n\t} = useIrepsMap();\r\n\t// console.log(`displayLMWardBoundaries`, displayLMWardBoundaries)\r\n\t// console.log(`state`, state);\r\n\r\n\tconst { lmWardBoundaries, lmBoundary } = state;\r\n\t// console.log(`lmWardBoundaries`, lmWardBoundaries);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!map) return;\r\n\r\n\t\tdisplayLMWardBoundaries(map);\r\n\t\t// return map.data.forEach((feature) => map.data.remove(feature));\r\n\t}, [displayLMWardBoundaries, map]);\r\n\r\n\tconst handleChange = (e) => {\r\n\t\t// console.log(`e.currentTarget.value`, e.currentTarget.value);\r\n\t\tconst selectedWard = e.currentTarget?.value;\r\n\t\t// console.log(`selectedWard`, selectedWard);\r\n\r\n\t\ttry {\r\n\t\t\t// filter in only the selected ward\r\n\t\t\tconst selection = lmWardBoundaries?.find((wardBoundary) => {\r\n\t\t\t\t// console.log(`wardBoundary.ward`, wardBoundary.ward)\r\n\t\t\t\t// console.log(`selectedWard`, selectedWard)\r\n\r\n\t\t\t\treturn Number(wardBoundary?.ward) === Number(selectedWard);\r\n\t\t\t});\r\n\t\t\t// console.log(`selection`, selection);\r\n\r\n\t\t\tmap.data.forEach((feature) => {\r\n\t\t\t\t// console.log(`feature`, feature);\r\n\t\t\t\tmap.data.remove(feature);\r\n\t\t\t});\r\n\r\n\t\t\tif (selectedWard === \"All Wards\") {\r\n\t\t\t\tdisplayLmBoundary(map);\r\n\t\t\t\tfitWardBoundary(map, lmBoundary);\r\n\t\t\t\tsetErfsContext({\r\n\t\t\t\t\t...erfsContext,\r\n\t\t\t\t\tward: null,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tfitWardBoundary(map, selection?.wardBoundary, selection?.ward);\r\n\t\t\t\tsetErfsContext({\r\n\t\t\t\t\t...erfsContext,\r\n\t\t\t\t\tward: Number(selection?.ward),\r\n\t\t\t\t});\r\n\t\t\t\tmap?.data?.loadGeoJson(selection?.erfBoundary);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`Error in MapLmWardBoundaries : `, error.message);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MapControl\r\n\t\t\tposition={ControlPosition.TOP_LEFT}\r\n\t\t\tstyle={{ margin: \"1.6rem\" }}\r\n\t\t>\r\n\t\t\t<div className=\"map-lm-ward-boundaries\">\r\n\t\t\t\t<select\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t// value={selectedWard}\r\n\t\t\t\t\tclassName=\"map-control-select\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<option key={\"All Wards\"} value={\"All Wards\"}>\r\n\t\t\t\t\t\t{\"All Wards\"}\r\n\t\t\t\t\t</option>\r\n\t\t\t\t\t{lmWardBoundaries &&\r\n\t\t\t\t\t\tlmWardBoundaries?.map((option) => {\r\n\t\t\t\t\t\t\t// console.log(`option`, option);\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<option key={option?.ward} value={option?.ward}>\r\n\t\t\t\t\t\t\t\t\t{option?.ward}\r\n\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</MapControl>\r\n\t);\r\n};\r\n\r\nexport default MapLmWardBoundaries;\r\n","import { useMap } from \"@vis.gl/react-google-maps\";\r\nimport { useEffect } from \"react\";\r\n\r\n// hooks\r\nimport useIrepsMap from \"@/hooks/useIrepsMap\";\r\n\r\nconst MapLmBoundary = () => {\r\n\t// console.log(`props`, props)\r\n\r\n\t// const { center } = props;\r\n\r\n\t// get map object\r\n\tconst map = useMap();\r\n\t// const map = mapRef.current;\r\n\t// console.log(`map`, map);\r\n\r\n\tconst { displayLmBoundary, state } = useIrepsMap();\r\n\t// console.log(`displayLmBoundary`, displayLmBoundary);\r\n\r\n\tconst { lmBoundary } = state;\r\n\r\n\t// Display lm boundary\r\n\tuseEffect(() => {\r\n\t\tif (!map) return;\r\n\r\n\t\tdisplayLmBoundary(map);\r\n\t\t// return map.data.forEach((feature) => map.data.remove(feature));\r\n\t}, [lmBoundary]);\r\n\r\n\treturn null;\r\n\r\n\t// return <div className=\"map-boundaries\"></div>;\r\n};\r\n\r\nexport default MapLmBoundary;\r\n","// npm libraries\nimport { useCallback, useState, useEffect } from \"react\";\nimport { AdvancedMarker } from \"@vis.gl/react-google-maps\";\n\n// css\nimport \"@/components/maps/ErfMarker.css\";\n\n/**\n * Wrapper Component for an AdvancedMarker for a single erf.\n */\nexport const ErfMarker = (props) => {\n\tconst { erf, onClick, setMarkerRef } = props;\n\t// console.log(`erf`, erf);\n\n\tconst [noAccess, setNoAccess] = useState(null);\n\n\t// check if erf has a NP ACCESS\n\tuseEffect(() => {\n\t\tif (erf?.trns?.length) {\n\t\t\t// console.log(`erf ${erf?.erfNo} has NO ACCESS`);\n\t\t\tsetNoAccess(erf?.trns?.length);\n\t\t}\n\t}, []);\n\n\tconst handleClick = useCallback(() => onClick(erf), [onClick, erf]);\n\tconst ref = useCallback(\n\t\t(marker) => setMarkerRef(marker, erf.id),\n\t\t[setMarkerRef, erf?.id]\n\t);\n\tconst { asts } = erf;\n\tconst astTotal = asts?.length || \"\";\n\n\treturn (\n\t\t<div className=\"erf-marker\">\n\t\t\t<AdvancedMarker\n\t\t\t\tposition={{\n\t\t\t\t\tlat: erf?.address?.gps?.latitude,\n\t\t\t\t\tlng: erf?.address?.gps?.longitude,\n\t\t\t\t}}\n\t\t\t\tref={ref}\n\t\t\t\t// onClick={handleClick}\n\t\t\t>\n\t\t\t\t{noAccess && <button className=\"erf-no-access\">{noAccess}</button>}\n\t\t\t\t{astTotal && <button className=\"erf-asts\">{astTotal}</button>}\n\t\t\t\t<button className=\"erf-no-btn\">\n\t\t\t\t\t<span className=\"erf-no\">{erf?.erfNo}</span>\n\t\t\t\t</button>\n\t\t\t</AdvancedMarker>\n\t\t</div>\n\t);\n};\n","// npm library\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\r\nimport { InfoWindow, useMap } from \"@vis.gl/react-google-maps\";\r\n\r\n// css\r\nimport \"@/components/maps/ClusteredErfMarkers.css\";\r\n\r\n// context\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\n// components\r\nimport { ErfMarker } from \"@/components/maps/ErfMarker\";\r\nimport FormErf from \"@/components/forms/formErf/FormErf\";\r\n\r\n/**\r\n * The ClusterederfMarkers component is responsible for integrating the\r\n * markers with the markerclusterer.\r\n */\r\nexport const ClusteredErfMarkers = () => {\r\n\tconst { erfsContext, setErfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst { erfs: landParcels, ward } = useMemo(() => erfsContext, [erfsContext]);\r\n\t// console.log(`landParcels`, landParcels);\r\n\t// console.log(`ward`, ward);\r\n\r\n\tconst erfs =\r\n\t\tlandParcels &&\r\n\t\tlandParcels?.filter((erf) => Number(erf?.address?.ward) === Number(ward));\r\n\t// console.log(`erfs`, erfs);\r\n\r\n\tconst [markers, setMarkers] = useState({});\r\n\tconst [selectedErfKey, setSelectedErfKey] = useState(null);\r\n\t// console.log(`selectedErfKey`, selectedErfKey)\r\n\r\n\tconst selectedErf = useMemo(\r\n\t\t() =>\r\n\t\t\terfs && selectedErfKey\r\n\t\t\t\t? erfs.find((erf) => erf.id === selectedErfKey)\r\n\t\t\t\t: null,\r\n\t\t[erfs, selectedErfKey]\r\n\t);\r\n\t// console.log(`selectedErf`, selectedErf);\r\n\r\n\t// create the markerClusterer once the map is available and update it when\r\n\t// the markers are changed\r\n\tconst map = useMap();\r\n\tconst clusterer = useMemo(() => {\r\n\t\tif (!map) return null;\r\n\r\n\t\treturn new MarkerClusterer({ map, zoom: 10 });\r\n\t}, [map]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// console.log(`ClusteredErfMarkers Mounting `);\r\n\t\treturn () => {\r\n\t\t\t// console.log(`ClusteredErfMarkers unmounting `);\r\n\t\t\tsetErfsContext({\r\n\t\t\t\t...erfsContext,\r\n\t\t\t\tward: null,\r\n\t\t\t});\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!clusterer) return;\r\n\r\n\t\ttry {\r\n\t\t\tclusterer?.clearMarkers();\r\n\t\t\tclusterer?.addMarkers(Object?.values(markers));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`Error in ClusteredErfMarkers: `, error.message);\r\n\t\t}\r\n\t}, [clusterer, markers]);\r\n\r\n\t// this callback will effectively get passed as ref to the markers to keep\r\n\t// tracks of markers currently on the map\r\n\tconst setMarkerRef = useCallback((marker, key) => {\r\n\t\tsetMarkers((markers) => {\r\n\t\t\tif ((marker && markers[key]) || (!marker && !markers[key]))\r\n\t\t\t\treturn markers;\r\n\r\n\t\t\tif (marker) {\r\n\t\t\t\treturn { ...markers, [key]: marker };\r\n\t\t\t} else {\r\n\t\t\t\tconst { [key]: _, ...newMarkers } = markers;\r\n\t\t\t\t// console.log(`newMarkers`, newMarkers);\r\n\t\t\t\treturn newMarkers;\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"clustered-erf-markers\">\r\n\t\t\t{erfs.map((erf, index) => {\r\n\t\t\t\t// console.log(`index `,index)\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ErfMarker\r\n\t\t\t\t\t\tkey={erf.id}\r\n\t\t\t\t\t\terf={erf}\r\n\t\t\t\t\t\t// onClick={(erf) => setSelectedErfKey(erf.id)}\r\n\t\t\t\t\t\tsetMarkerRef={setMarkerRef}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\r\n\t\t\t{selectedErfKey && (\r\n\t\t\t\t<InfoWindow\r\n\t\t\t\t\tanchor={markers[selectedErfKey]}\r\n\t\t\t\t\t// onCloseClick={() => setSelectedErfKey(null)}\r\n\t\t\t\t\t// zIndex={100000}\r\n\t\t\t\t\tdisableAutoPan={true}\r\n\t\t\t\t\theaderDisabled={true}\r\n\t\t\t\t\t// disableAutoPan={true}\r\n\t\t\t\t\t// style={{\r\n\t\t\t\t\t// \tzIndex: 100000,\r\n\t\t\t\t\t// }}\r\n\t\t\t\t\tmaxWidth={\"100vw\"}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"iw-erf-form\">\r\n\t\t\t\t\t\t<FormErf\r\n\t\t\t\t\t\t\tdata={{\r\n\t\t\t\t\t\t\t\tdata: selectedErf,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InfoWindow>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n","// npm libraries\nimport { useCallback } from \"react\";\nimport { AdvancedMarker } from \"@vis.gl/react-google-maps\";\n\n// css\nimport \"@/components/maps/AstMarker.css\";\n\n/**\n * Wrapper Component for an AdvancedMarker for a single ast.\n */\nexport const AstMarker = (props) => {\n\tconst { ast, onClick, setMarkerRef } = props;\n\n\tconst { lat, lng } = ast?.location?.gps;\n\n\tconst handleClick = useCallback(() => onClick(ast), [onClick, ast]);\n\n\tconst ref = useCallback(\n\t\t(marker) => {\n\t\t\tif (setMarkerRef) {\n\t\t\t\treturn setMarkerRef(marker, ast.id);\n\t\t\t}\n\t\t},\n\t\t[setMarkerRef, ast.id]\n\t);\n\tconst { trns } = ast;\n\tconst totalTrns = trns?.length || \"\";\n\n\treturn (\n\t\t<AdvancedMarker\n\t\t\tposition={{\n\t\t\t\tlat: Number(lat),\n\t\t\t\tlng: Number(lng),\n\t\t\t}}\n\t\t\tref={ref}\n\t\t\t// onClick={handleClick}\n\t\t>\n\t\t\t{/* <span className=\"marker-clustering-ast\">🌳</span> */}\n\t\t\t{totalTrns && <button className=\"ast-asts\">{totalTrns}</button>}\n\t\t\t<button className=\"ast-no-btn\">\n\t\t\t\t<span className=\"ast-no\">{ast?.astData?.astNo}</span>\n\t\t\t</button>\n\t\t</AdvancedMarker>\n\t);\n};\n","// npm library\r\nimport { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { MarkerClusterer } from \"@googlemaps/markerclusterer\";\r\nimport { InfoWindow, useMap } from \"@vis.gl/react-google-maps\";\r\n\r\n// context\r\nimport { AstsContext } from \"@/contexts/AstsContext\";\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\n// components\r\nimport { AstMarker } from \"@/components/maps/AstMarker\";\r\nimport AstsActivity from \"@/components/asts/astsActivity/AstsActivity\";\r\n\r\n/**\r\n * The ClusteredAstMarkers component is responsible for integrating the\r\n * markers with the markerclusterer.\r\n */\r\nexport const ClusteredAstMarkers = (props) => {\r\n\tconst { asts: meters } = props;\r\n\t// console.log(`meters`, meters);\r\n\r\n\t// const { astsContext } = useContext(AstsContext);\r\n\t// console.log(`astsContext`, astsContext)\r\n\r\n\tconst { erfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst { ward } = useMemo(() => erfsContext, [erfsContext]);\r\n\t// console.log(`landParcels`, landParcels);\r\n\t// console.log(`ward`, ward);\r\n\r\n\tconst asts = meters?.filter(\r\n\t\t(erf) => Number(erf?.erf?.address?.ward) === Number(ward)\r\n\t);\r\n\t// console.log(`asts`, asts);\r\n\r\n\t// const asts = useMemo(() => astsContext?.asts, [astsContext?.asts]);\r\n\r\n\tconst [markers, setMarkers] = useState({});\r\n\tconst [selectedAstKey, setSelectedAstKey] = useState(null);\r\n\t// console.log(`selectedAstKey`, selectedAstKey)\r\n\r\n\tconst selectedAst = useMemo(\r\n\t\t() =>\r\n\t\t\tasts && selectedAstKey\r\n\t\t\t\t? asts.find((ast) => ast.id === selectedAstKey)\r\n\t\t\t\t: null,\r\n\t\t[asts, selectedAstKey]\r\n\t);\r\n\t// console.log(`selectedAst`, selectedAst);\r\n\r\n\t// create the markerClusterer once the map is available and update it when\r\n\t// the markers are changed\r\n\tconst map = useMap();\r\n\tconst clusterer = useMemo(() => {\r\n\t\tif (!map) return null;\r\n\r\n\t\treturn new MarkerClusterer({ map, zoom: 10 });\r\n\t}, [map]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!clusterer) return;\r\n\r\n\t\ttry {\r\n\t\t\tclusterer.clearMarkers();\r\n\t\t\tclusterer.addMarkers(Object.values(markers));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(`Error in ClusteredAstMarkers: `, error.message);\r\n\t\t}\r\n\t}, [clusterer, markers]);\r\n\r\n\t// this callback will effectively get passsed as ref to the markers to keep\r\n\t// tracks of markers currently on the map\r\n\tconst setMarkerRef = useCallback((marker, key) => {\r\n\t\tsetMarkers((markers) => {\r\n\t\t\tif ((marker && markers[key]) || (!marker && !markers[key]))\r\n\t\t\t\treturn markers;\r\n\r\n\t\t\tif (marker) {\r\n\t\t\t\treturn { ...markers, [key]: marker };\r\n\t\t\t} else {\r\n\t\t\t\tconst { [key]: _, ...newMarkers } = markers;\r\n\t\t\t\t// console.log(`newMarkers`, newMarkers);\r\n\t\t\t\treturn newMarkers;\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{asts?.map((ast, index) => {\r\n\t\t\t\t// console.log('index' , index)\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<AstMarker\r\n\t\t\t\t\t\tkey={ast.id}\r\n\t\t\t\t\t\tast={ast}\r\n\t\t\t\t\t\t// onClick={(ast) => setSelectedAstKey(ast?.id)}\r\n\t\t\t\t\t\tsetMarkerRef={setMarkerRef}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\r\n\t\t\t{selectedAstKey && (\r\n\t\t\t\t<InfoWindow\r\n\t\t\t\t\tanchor={markers[selectedAstKey]}\r\n\t\t\t\t\t// onCloseClick={() => setSelectedAstKey(null)}\r\n\t\t\t\t\tonClose={() => setSelectedAstKey(null)}\r\n\t\t\t\t\theaderContent={`Meter No: ${selectedAst?.astData?.astNo}`}\r\n\t\t\t\t\theaderDisabled={true}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<AstsActivity\r\n\t\t\t\t\t\t\tdata={{\r\n\t\t\t\t\t\t\t\tdata: selectedAst,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InfoWindow>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","// npm libraries\r\nimport { useContext, useMemo } from \"react\";\r\nimport Select from \"react-select\";\r\n\r\n// css\r\nimport \"@/components/maps/MapAstFilter.css\";\r\n\r\n// hooks\r\nimport { useMap, MapControl, ControlPosition } from \"@vis.gl/react-google-maps\";\r\n\r\n// contexts\r\nimport { AstsContext } from \"@/contexts/AstsContext\";\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\n// images\r\nimport meter14 from \"@/images/meter14.jpg\";\r\n\r\nconst MapAstFilter = (props) => {\r\n\t// console.log(`MapAstFilter`)\r\n\tconst { asts: meters } = props;\r\n\t// console.log(`meters`, meters);\r\n\r\n\tconst { erfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst { ward } = useMemo(() => erfsContext, [erfsContext]);\r\n\t// console.log(`landParcels`, landParcels);\r\n\t// console.log(`ward`, ward);\r\n\r\n\tconst asts = meters?.filter(\r\n\t\t(erf) => Number(erf?.erf?.address?.ward) === Number(ward)\r\n\t);\r\n\t// console.log(`asts`, asts);\r\n\r\n\tconst map = useMap();\r\n\t// console.log(`map`, map);\r\n\r\n\t// const { astsContext } = useContext(AstsContext);\r\n\t// console.log(`astsContext`, astsContext);\r\n\r\n\t// const {asts} = astsContext\r\n\t// const asts = useMemo(() => {\r\n\t// \treturn astsContext?.asts;\r\n\t// }, [assests]);\r\n\t// console.log(`asts`, asts);\r\n\r\n\tconst options =\r\n\t\tasts &&\r\n\t\tasts?.map((ast) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: ast?.astData?.astNo,\r\n\t\t\t\tlabel: ast?.astData?.astNo,\r\n\t\t\t\tdata: ast,\r\n\t\t\t};\r\n\t\t});\r\n\t// console.log(`options`, options);\r\n\r\n\tconst setSelectedOption = (selection) => {\r\n\t\t// console.log(`selection`, selection);\r\n\t\tif (!map) return;\r\n\t\tif (!selection) return;\r\n\t\tmap.panTo({\r\n\t\t\tlat: Number(selection.data?.location?.gps?.lat),\r\n\t\t\tlng: Number(selection.data?.location?.gps?.lng),\r\n\t\t});\r\n\t\tmap.setZoom(20);\r\n\t};\r\n\r\n\tconst clearValue = (e) => {\r\n\t\t// console.log(`clearing selected value`, e);\r\n\t\treturn null;\r\n\t};\r\n\r\n\tconst customStyles = {\r\n\t\tcontrol: (provided) => ({\r\n\t\t\t...provided,\r\n\t\t\tbackgroundColor: \"lightgray\",\r\n\t\t\tpadding: \"0.11rem\",\r\n\t\t\t// border: \"1px solid black\",\r\n\t\t\t// boxShadow: \"0 2px 4px rgba(0,0,0,.2)\",\r\n\t\t}),\r\n\t\toption: (provided, state) => ({\r\n\t\t\t...provided,\r\n\t\t\tborderBottom: \"1px dotted pink\",\r\n\t\t\tcolor: state.isSelected ? \"white\" : \"black\",\r\n\t\t\tbackgroundColor: state.isSelected ? \"hotpink\" : \"white\",\r\n\t\t}),\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MapControl\r\n\t\t\tposition={ControlPosition.LEFT_TOP}\r\n\t\t\tstyle={{ margin: \"1.6rem\" }}\r\n\t\t>\r\n\t\t\t<div className=\"map-ast-filter\">\r\n\t\t\t\t<div className=\"maf\">\r\n\t\t\t\t\t<h2>Mn</h2>\r\n\t\t\t\t\t{/* <img src={meter14} alt=\"electricity meter\" /> */}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tdefaultValue={\"Meter No\"}\r\n\t\t\t\t\toptions={options}\r\n\t\t\t\t\tisClearable={true}\r\n\t\t\t\t\tonChange={setSelectedOption}\r\n\t\t\t\t\tclearValue={clearValue}\r\n\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</MapControl>\r\n\t);\r\n};\r\n\r\nexport default MapAstFilter;\r\n","// npm libraries\r\nimport { useContext, useMemo } from \"react\";\r\nimport Select from \"react-select\";\r\n\r\n// css\r\nimport \"@/components/maps/MapErfFilter.css\";\r\n\r\n// hooks\r\nimport { useMap, MapControl, ControlPosition } from \"@vis.gl/react-google-maps\";\r\n\r\n// contexts\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\n// images\r\n// import house1 from \"@/images/house1.png\";\r\n\r\nconst MapErfFilter = () => {\r\n\t// console.log(`MapErfFilter`)\r\n\r\n\tconst map = useMap();\r\n\t// console.log(`map`, map);\r\n\r\n\tconst { erfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst { erfs: landParcels, ward } = useMemo(() => erfsContext, [erfsContext]);\r\n\t// console.log(`landParcels`, landParcels);\r\n\t// console.log(`ward`, ward);\r\n\r\n\tconst erfs =\r\n\t\tlandParcels &&\r\n\t\tlandParcels?.filter((erf) => Number(erf?.address?.ward) === Number(ward));\r\n\t// console.log(`erfs`, erfs);\r\n\r\n\t// const {erfs} = erfsContext\r\n\t// const erfs = useMemo(() => {\r\n\t// \treturn erfsContext?.erfs;\r\n\t// }, [erfsContext]);\r\n\t// console.log(`erfs`, erfs);\r\n\r\n\tconst options =\r\n\t\terfs &&\r\n\t\terfs.map((erf) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: erf.erfNo,\r\n\t\t\t\tlabel: erf.erfNo,\r\n\t\t\t\tdata: erf,\r\n\t\t\t};\r\n\t\t});\r\n\t// console.log(`options`, options);\r\n\r\n\tconst setSelectedOption = (selection) => {\r\n\t\t// console.log(`selection`, selection);\r\n\t\tif (!map) return;\r\n\t\tif (!selection) return;\r\n\t\tmap.panTo({\r\n\t\t\tlat: Number(selection.data?.address?.gps?.latitude),\r\n\t\t\tlng: Number(selection.data?.address?.gps?.longitude),\r\n\t\t});\r\n\t\tmap.setZoom(20);\r\n\t};\r\n\r\n\tconst clearValue = (e) => {\r\n\t\tconsole.log(`clearing selected value`, e);\r\n\t\treturn null;\r\n\t};\r\n\r\n\tconst customStyles = {\r\n\t\tcontrol: (provided) => ({\r\n\t\t\t...provided,\r\n\t\t\tbackgroundColor: \"lightgray\",\r\n\t\t\tpadding: \"0.15rem\",\r\n\t\t\t// border: \"1px solid black\",\r\n\t\t\t// boxShadow: \"0 2px 4px rgba(0,0,0,.2)\",\r\n\t\t}),\r\n\t\toption: (provided, state) => ({\r\n\t\t\t...provided,\r\n\t\t\tborderBottom: \"1px dotted pink\",\r\n\t\t\tcolor: state.isSelected ? \"white\" : \"black\",\r\n\t\t\tbackgroundColor: state.isSelected ? \"hotpink\" : \"white\",\r\n\t\t}),\r\n\t};\r\n\r\n\treturn (\r\n\t\t<MapControl\r\n\t\t\tposition={ControlPosition.LEFT_TOP}\r\n\t\t\tstyle={{ margin: \"1.6rem\" }}\r\n\t\t>\r\n\t\t\t<div className=\"map-erf-filter\">\r\n\t\t\t\t<div className=\"mef\">\r\n\t\t\t\t\t{/* <img src={house1} alt=\"erf\" /> */}\r\n\t\t\t\t\t<h2>Erf</h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tdefaultValue={\"Erf No\"}\r\n\t\t\t\t\toptions={options}\r\n\t\t\t\t\tisClearable={true}\r\n\t\t\t\t\tonChange={setSelectedOption}\r\n\t\t\t\t\tclearValue={clearValue}\r\n\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</MapControl>\r\n\t);\r\n};\r\n\r\nexport default MapErfFilter;\r\n","// npm libraries\r\nimport { useContext, useMemo } from \"react\";\r\n\r\n// css\r\nimport \"@/components/map/MapMain.css\";\r\n\r\n// contexts\r\nimport { ErfsContext } from \"@/contexts/ErfsContext\";\r\n\r\n// components\r\nimport MapIrepsMap from \"@/components/maps/MapIrepsMap\";\r\nimport MapLmWardBoundaries from \"@/components/maps/MapLmWardBoundaries\";\r\nimport MapLmBoundary from \"@/components/maps/MapLmBoundary\";\r\nimport { ClusteredErfMarkers } from \"../maps/ClusteredErfMarkers\";\r\nimport { ClusteredAstMarkers } from \"@/components/maps/ClusteredAstMarkers\";\r\nimport MapAstFilter from \"@/components/maps/MapAstFilter\";\r\nimport MapErfFilter from \"@/components/maps/MapErfFilter\";\r\n\r\nconst MapMain = (props) => {\r\n\t// console.log(`ErfsMap props`, props);\r\n\tconst { asts, astsTableFields } = props;\r\n\r\n\tconst { erfsContext } = useContext(ErfsContext);\r\n\t// console.log(`erfsContext`, erfsContext);\r\n\r\n\tconst { ward } = useMemo(() => erfsContext, [erfsContext]);\r\n\t// console.log(`ward`, ward);\r\n\r\n\treturn (\r\n\t\t<div className=\"map-main\">\r\n\t\t\t<MapIrepsMap>\r\n\t\t\t\t<MapLmBoundary />\r\n\t\t\t\t<MapLmWardBoundaries />\r\n\t\t\t\t<ClusteredAstMarkers asts={asts} astsTableFields={astsTableFields} />\r\n\t\t\t\t<ClusteredErfMarkers />\r\n\r\n\t\t\t\t{ward ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<MapAstFilter asts={asts} astsTableFields={astsTableFields} />\r\n\t\t\t\t\t\t<MapErfFilter />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t)}\r\n\t\t\t</MapIrepsMap>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MapMain;\r\n","// import { useCallback, useContext } from \"react\";\r\n\r\n// css\r\nimport \"@/components/map/MapHeader.css\";\r\n\r\n// hooks\r\nimport { useUser } from \"@/hooks/useUser\";\r\nimport useAuthContext from \"@/hooks/useAuthContext\";\r\n\r\n// components\r\n// import { ErfsContext } from \"@/contexts/ErfsContext\";\r\nimport PageTitle from \"@/pages/PageTitle\";\r\n// import FilterBtn from \"@/components/filters/FilterBtn\";\r\n// import BtnPageHeaderBtn from \"@/components/buttons/BtnPageHeaderBtn\";\r\n\r\nconst MapHeader = (props) => {\r\n\t// props\r\n\tconst { phLl } = props;\r\n\r\n\tconst { user } = useAuthContext();\r\n\t// console.log(`user`, user);\r\n\r\n\tconst { userFromUsers } = useUser(user?.uid);\r\n\t// console.log(`userFromUsers`, userFromUsers);\r\n\r\n\t// context\r\n\t// const { setErfsContext } = useContext(ErfsContext);\r\n\r\n\t// handle event - active tab\r\n\t// const handleActiveTab = useCallback( (e) => {\r\n\t// \t// console.log(`e.target.id`, e.target.id);\r\n\t// \tsetErfsContext((prev) => {\r\n\t// \t\treturn {\r\n\t// \t\t\t...prev,\r\n\t// \t\t\tactiveTab: e.target.id,\r\n\t// \t\t};\r\n\t// \t})\r\n\t// },[setErfsContext])\r\n\r\n\treturn (\r\n\t\t<div className=\"map-header\">\r\n\t\t\t<div className=\"ph ph-left\">\r\n\t\t\t\t<div className=\"phLl\">\r\n\t\t\t\t\t{/* <FilterBtn /> */}\r\n\t\t\t\t\t<PageTitle title={phLl} />\r\n\t\t\t\t\t<PageTitle title={userFromUsers.workbase} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"ph ph-right\">\r\n\t\t\t\t<div className=\"phRl\"></div>\r\n\t\t\t\t<div className=\"phRr\">\r\n\t\t\t\t\t{/* <BtnPageHeaderBtn\r\n\t\t\t\t\t\thandleClick={handleActiveTab}\r\n\t\t\t\t\t\ttabName=\"table\"\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t{/* <BtnPageHeaderBtn\r\n\t\t\t\t\t\thandleClick={handleActiveTab}\r\n\t\t\t\t\t\ttabName=\"split\"\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t{/* <BtnPageHeaderBtn\r\n\t\t\t\t\t\thandleClick={handleActiveTab}\r\n\t\t\t\t\t\ttabName=\"map\"\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MapHeader;\r\n","// npm imports\r\nimport { useCallback } from \"react\";\r\n\r\n// css\r\nimport \"@/pages/map/Map.css\";\r\n\r\n// hooks\r\nimport { useAstsMap } from \"@/hooks/useAstsMap.jsx\";\r\nimport { useErfs } from \"@/hooks/useErfs.jsx\";\r\n\r\n// components\r\nimport MapMain from \"@/components/map/MapMain\";\r\nimport MapHeader from \"@/components/map/MapHeader\";\r\n\r\nconst Map = () => {\r\n\t// console.log(`Map is running`)\r\n\r\n\tuseErfs();\r\n\tconst { asts, astsTableFields, error } = useAstsMap();\r\n\t// console.log(`asts`, asts);\r\n\t// console.log(`astsTableFields`, astsTableFields);\r\n\t// console.log(`error`, error);\r\n\r\n\treturn (\r\n\t\t<div className=\"map\">\r\n\t\t\t<MapHeader phLl=\"Map\" />\r\n\t\t\t<div className=\"map-body\">\r\n\t\t\t\t<MapMain asts={asts} astsTableFields={astsTableFields} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Map;\r\n"],"names":["MapLmWardBoundaries","erfsContext","setErfsContext","useContext","ErfsContext","map","useMap","displayLMWardBoundaries","state","fitWardBoundary","displayLmBoundary","useIrepsMap","lmWardBoundaries","lmBoundary","useEffect","handleChange","e","selectedWard","_a","selection","wardBoundary","feature","_b","error","jsx","MapControl","ControlPosition","jsxs","option","MapLmBoundary","ErfMarker","props","erf","onClick","setMarkerRef","noAccess","setNoAccess","useState","useCallback","ref","marker","asts","astTotal","AdvancedMarker","_d","_c","ClusteredErfMarkers","landParcels","ward","useMemo","erfs","markers","setMarkers","selectedErfKey","setSelectedErfKey","selectedErf","clusterer","MarkerClusterer","key","_","newMarkers","index","InfoWindow","FormErf","AstMarker","ast","lat","lng","trns","totalTrns","ClusteredAstMarkers","meters","selectedAstKey","setSelectedAstKey","selectedAst","Fragment","AstsActivity","MapAstFilter","options","setSelectedOption","_f","_e","clearValue","customStyles","provided","Select","MapErfFilter","MapMain","astsTableFields","MapIrepsMap","MapHeader","phLl","user","useAuthContext","userFromUsers","useUser","PageTitle","Map","useErfs","useAstsMap"],"mappings":"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"}