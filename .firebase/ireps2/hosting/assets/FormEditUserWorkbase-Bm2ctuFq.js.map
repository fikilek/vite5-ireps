{"version":3,"file":"FormEditUserWorkbase-Bm2ctuFq.js","sources":["../../src/components/forms/auth/FormEditUserWorkbase.jsx"],"sourcesContent":["import { Formik, Form } from \"formik\";\nimport { object, string } from \"yup\";\nimport { useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useSignup } from \"@/hooks/useSignup\";\n\n// css\nimport \"@/components/forms/Form.css\";\n\n// custom hooks\nimport useModal from \"@/hooks/useModal.jsx\";\nimport { useFirestore } from \"@/hooks/useFirestore\";\n\n// context\nimport useAuthContext from \"@/hooks/useAuthContext.jsx\";\n\n// components\nimport FormikControl from \"@/components/forms/formik/FormikControl\";\nimport FormFooter from \"@/components/forms/formFooter/FormFooter\";\nimport FormMsg from \"@/components/forms/formMsg/FormMsg\";\nimport FormError from \"@/components/forms/formError/FormError\";\nimport HeaderGeneric from \"@/components/header/HeaderGeneric\";\nimport FormCloseBtn from \"@/components/forms/formBtns/FormCloseBtn\";\n// import { useServiceProviders } from \"@/hooks/useServiceProviders\";\nimport { useState } from \"react\";\n\nconst EditUserWorkbase = (props) => {\n\t// console.log(`props`, props);\n\n\tconst { response, getDocument } = useFirestore(\"users\");\n\t// console.log(`response`, response);\n\t// console.log(`getDocument`, getDocument);\n\n\tconst { user } = useAuthContext();\n\t// console.log(`user`, user);\n\n\t// get user uid from userContext\n\tconst { uid } = user;\n\t// console.log(`uid`, uid);\n\n\tconst [userInfo, setUserInfo] = useState(null);\n\t// console.log(`userInfo`, userInfo);\n\n\tlet workbases = [{ key: \"choose\", value: \"choose\" }];\n\tuserInfo?.workbases &&\n\t\tuserInfo?.workbases?.map((workbase) => {\n\t\t\tworkbases.push({\n\t\t\t\tkey: workbase,\n\t\t\t\tvalue: workbase,\n\t\t\t});\n\t\t});\n\n\t// console.log(`workbases`, workbases);\n\n\tconst { closeModal } = useModal();\n\n\tconst { formData: workbase } = props;\n\n\tconst { updateUserWorkbase, signupState } = useSignup();\n\n\tconst initialValues = {\n\t\tnewWorkbase: workbase,\n\t\tworkbase, //old workbase\n\t\tpassword: \"\",\n\t};\n\n\tconst onSubmit = (values) => {\n\t\t// console.log(`Form values`, values);\n\t\tupdateUserWorkbase(values);\n\t};\n\n\tconst validationSchema = object({\n\t\tnewWorkbase: string().required(\"Workbase is required.\"),\n\t\tworkbase: string().required(\"Workbase is required.\"),\n\t\tpassword: string().required(\"Password is required.\"),\n\t});\n\n\tuseEffect(() => {\n\t\tif (signupState.success) {\n\t\t\tcloseModal();\n\t\t\ttoast.success(\n\t\t\t\t`User workbase for \"${user.displayName}\", succesfully updated.`,\n\t\t\t\t{\n\t\t\t\t\tposition: \"bottom-left\",\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}, [signupState.success, closeModal]);\n\n\tuseEffect(() => {\n\t\tif (response.success) {\n\t\t\t// console.log(`response`, response);\n\t\t\tconst { companyName } = response?.document;\n\t\t\t// console.log(`companyName`, companyName)\n\t\t\t// setCompanyName(companyName);\n\t\t\tsetUserInfo(response?.document);\n\t\t}\n\t}, [response.success]);\n\n\tuseEffect(() => {\n\t\tgetDocument(uid);\n\t}, [uid]);\n\n\treturn (\n\t\t<div className=\"form-wrapper\">\n\t\t\t<div className=\"form-container edit-user-workbase\">\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t\t>\n\t\t\t\t\t{(formik) => {\n\t\t\t\t\t\t// console.log(`formik`, formik);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t\t\t<HeaderGeneric hl1=\"Edit User Workbase\" hr1={<p></p>}>\n\t\t\t\t\t\t\t\t\t\t<FormCloseBtn />\n\t\t\t\t\t\t\t\t\t</HeaderGeneric>\n\t\t\t\t\t\t\t\t\t<FormMsg msg=\"Enter the new workbase on the 'workbase' field below and submit.\" />\n\t\t\t\t\t\t\t\t\t<div className=\"edit-workbase-form\">\n\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\tcontrol=\"input\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Old Workbase\"\n\t\t\t\t\t\t\t\t\t\t\tname={\"workbase\"}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\tcontrol=\"select\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"New Workbase\"\n\t\t\t\t\t\t\t\t\t\t\tname={\"newWorkbase\"}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\toptions={workbases}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\tcontrol=\"inputPwd\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\t\t\t\t\t\t\tname={\"password\"}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"user password\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{signupState.error && (\n\t\t\t\t\t\t\t\t\t\t<FormError errorMsg={signupState.error} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<FormFooter formik={formik} signState={signupState} />\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t</Formik>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default EditUserWorkbase;\n"],"names":["EditUserWorkbase","props","response","getDocument","useFirestore","user","useAuthContext","uid","userInfo","setUserInfo","useState","workbases","_a","workbase","closeModal","useModal","updateUserWorkbase","signupState","useSignup","initialValues","onSubmit","values","validationSchema","object","string","useEffect","toast","jsx","Formik","formik","Fragment","Form","HeaderGeneric","FormCloseBtn","FormMsg","jsxs","FormikControl","FormError","FormFooter"],"mappings":"ghBA0BM,MAAAA,EAAoBC,GAAU,OAGnC,KAAM,CAAE,SAAAC,EAAU,YAAAC,CAAY,EAAIC,EAAa,OAAO,EAIhD,CAAE,KAAAC,GAASC,IAIX,CAAE,IAAAC,CAAQ,EAAAF,EAGV,CAACG,EAAUC,CAAW,EAAIC,WAAS,IAAI,EAG7C,IAAIC,EAAY,CAAC,CAAE,IAAK,SAAU,MAAO,SAAU,EACnDH,GAAA,MAAAA,EAAU,aACTI,EAAAJ,GAAA,YAAAA,EAAU,YAAV,MAAAI,EAAqB,IAAKC,GAAa,CACtCF,EAAU,KAAK,CACd,IAAKE,EACL,MAAOA,CAAA,CACP,CAAA,IAKG,KAAA,CAAE,WAAAC,GAAeC,IAEjB,CAAE,SAAUF,CAAa,EAAAZ,EAEzB,CAAE,mBAAAe,EAAoB,YAAAC,CAAY,EAAIC,EAAU,EAEhDC,EAAgB,CACrB,YAAaN,EACb,SAAAA,EACA,SAAU,EAAA,EAGLO,EAAYC,GAAW,CAE5BL,EAAmBK,CAAM,CAAA,EAGpBC,EAAmBC,EAAO,CAC/B,YAAaC,EAAA,EAAS,SAAS,uBAAuB,EACtD,SAAUA,EAAA,EAAS,SAAS,uBAAuB,EACnD,SAAUA,EAAA,EAAS,SAAS,uBAAuB,CAAA,CACnD,EAEDC,OAAAA,EAAAA,UAAU,IAAM,CACXR,EAAY,UACJH,IACLY,EAAA,QACL,sBAAsBrB,EAAK,WAAW,0BACtC,CACC,SAAU,aACX,CAAA,EAGA,EAAA,CAACY,EAAY,QAASH,CAAU,CAAC,EAEpCW,EAAAA,UAAU,IAAM,CACXvB,EAAS,UAEYA,GAAA,MAAAA,EAAU,SAGlCO,EAAYP,GAAA,YAAAA,EAAU,QAAQ,EAC/B,EACE,CAACA,EAAS,OAAO,CAAC,EAErBuB,EAAAA,UAAU,IAAM,CACftB,EAAYI,CAAG,CAAA,EACb,CAACA,CAAG,CAAC,QAGN,MAAI,CAAA,UAAU,eACd,SAACoB,EAAA,IAAA,MAAA,CAAI,UAAU,oCACd,SAAAA,EAAA,IAACC,EAAA,CACA,cAAAT,EACA,SAAAC,EACA,iBAAAE,EAEC,SAACO,GAGAF,EAAAA,IAAAG,EAAAA,SAAA,CACC,gBAACC,EACA,CAAA,SAAA,CAACJ,EAAAA,IAAAK,EAAA,CAAc,IAAI,qBAAqB,UAAM,IAAE,CAAA,CAAA,EAC/C,SAACL,EAAAA,IAAAM,EAAA,CAAA,CAAa,CACf,CAAA,EACAN,EAAAA,IAACO,EAAQ,CAAA,IAAI,kEAAmE,CAAA,EAChFC,EAAAA,KAAC,MAAI,CAAA,UAAU,qBACd,SAAA,CAAAR,EAAA,IAACS,EAAA,CACA,QAAQ,QACR,KAAK,OACL,MAAM,eACN,KAAM,WACN,YAAY,GACZ,SAAQ,EAAA,CACT,EACAT,EAAA,IAACS,EAAA,CACA,QAAQ,SACR,KAAK,OACL,MAAM,eACN,KAAM,cACN,YAAY,GACZ,QAASzB,CAAA,CACV,EACAgB,EAAA,IAACS,EAAA,CACA,QAAQ,WACR,KAAK,WACL,MAAM,WACN,KAAM,WACN,YAAY,GACZ,aAAa,eAAA,CACd,CAAA,EACD,EACCnB,EAAY,OACZU,MAACU,EAAU,CAAA,SAAUpB,EAAY,MAAO,EAExCU,EAAAA,IAAAW,EAAA,CAAW,OAAAT,EAAgB,UAAWZ,CAAa,CAAA,CAAA,CACrD,CAAA,CACD,CAAA,CAEF,CAAA,CAEF,CAAA,CACD,CAAA,CAEF"}