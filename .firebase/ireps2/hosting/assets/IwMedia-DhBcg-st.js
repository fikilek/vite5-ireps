import{r as o,bt as x,H as T,bu as A,l as B,a1 as k,a9 as m,j as s,bv as z,I as c,bw as S,bx as _,by as $,bz as D,bA as H,bB as O,bC as R,bD as U,w as V,Y as W,bE as Y}from"./index-D5HP0Wxa.js";import q from"./MediaAction-DGwILWgx.js";import{I as G}from"./IrepsInfoWindow-BWdrxPlR.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="974bf439-6ace-4cf3-84a5-783becd84882",e._sentryDebugIdIdentifier="sentry-dbid-974bf439-6ace-4cf3-84a5-783becd84882")}catch{}const J=()=>{var b,p,g,y,v,M,N,I;const{mediaData:e,setMediaData:t}=o.useContext(x);console.log("mediaData",e);const{deleteDocument:r,response:a}=T("media"),{deleteFile:f,success:n}=A(),i=e==null?void 0:e.data[e==null?void 0:e.displayPosition],h=(b=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:b.url,u=(g=(p=e==null?void 0:e.data)==null?void 0:p.metadata)==null?void 0:g.mediaCatergory,E=(v=(y=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:y.metadata)==null?void 0:v.createdByUser,l=(N=(M=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:M.metadata)==null?void 0:N.createdAtDatetime;let j="";l&&(j=B(l==null?void 0:l.toDate(),k.dateFormat2));const P=async C=>{const F=C.currentTarget.id;try{let d=_($,i.url);await f(d,i.id),await r(F),t({...e,displayPosition:0})}catch(d){console.log(`Error deleting image ${d}`),m.error(`Error deleting image ${d}`,{position:"top-right"})}};return o.useEffect(()=>{a.error&&m.error(a.error,{position:"top-right"}),a.document&&n&&m.success(`Doc ${a.document} succesfully delete`,{position:"bottom-left"})},[a,n]),s.jsxs("div",{className:"media-main-display",children:[s.jsx(z,{hl1:E,hr3:j}),s.jsx("div",{className:"main-display-container",children:(I=e==null?void 0:e.data)!=null&&I.length?s.jsx("div",{className:"image",children:s.jsx("img",{src:h,alt:u,width:"100%",height:"100%"})}):s.jsx("p",{children:"No Image"})}),i&&s.jsx("button",{id:i==null?void 0:i.id,className:"mmd-delete-btn",onClick:P,children:s.jsx(c.Provider,{value:{color:"blue",className:"global-class-name"},children:s.jsx(S,{})})})]})},K=()=>s.jsxs("div",{className:"media-body",children:[s.jsx(J,{}),s.jsx(D,{})]}),w=e=>{const{filterTitle:t}=e;return s.jsxs("div",{className:"media-filter",children:[s.jsx("div",{className:"title",children:t}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-photos",title:"take a photo with camera",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(H,{})})}),s.jsx("span",{children:"3"})]}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-voice-clips",title:"make a voice clip",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(O,{})})}),s.jsx("span",{children:"2"})]}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-video-clips",title:"make a video clip",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(R,{})})}),s.jsx("span",{children:"1"})]})]})},L=()=>{const{mediaData:e,setMediaData:t}=o.useContext(x),r=e.data.length;return s.jsxs("div",{className:"media-filters",children:[s.jsxs("p",{className:"title",children:["Total Media ",r]}),s.jsxs("div",{className:"filters",children:[s.jsx(w,{filterTitle:"Erf"}),s.jsx(w,{filterTitle:"Asts"})]})]})},Q=e=>{const{data:t}=e;return s.jsxs("div",{className:"media-footer",children:[s.jsx(L,{}),s.jsx(U,{data:t})]})},X=e=>{const{data:t}=e,{mediaData:r,setMediaData:a}=o.useContext(x),f=useMemo(()=>V("metadata.erfId","==",t.id),[t.id]),{data:n,error:i,isPending:h,success:u}=W("media",[f]);return o.useEffect(()=>{t&&a({...r,data:n})},[n]),o.useEffect(()=>{t&&a({...r,erfData:t})},[t]),s.jsxs("div",{className:"media",children:[s.jsx(K,{data:t}),s.jsx(Q,{data:t}),s.jsx(q,{data:t})]})},te=e=>{const{data:t}=e;return s.jsx(G,{fhl1:"Media",fhl3:s.jsxs("span",{children:["Erf No: ",s.jsx("span",{className:"data-emphasis",children:t.erfNo})]}),fhr1:s.jsx(Y,{}),children:s.jsx(X,{data:t})})};export{te as default};
//# sourceMappingURL=IwMedia-DhBcg-st.js.map
