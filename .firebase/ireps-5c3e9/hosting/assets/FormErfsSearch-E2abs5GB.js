import{r as l,c as g,d as h,q as u,w as p,ay as m,B as y,am as N,an as E,a9 as f,j as o,ab as b,ad as x,ae as S,ap as j,ah as C,aq as w,aj as F}from"./index-Ckqn-BEY.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="03af5482-56b2-4596-92a8-d04e312bd767",e._sentryDebugIdIdentifier="sentry-dbid-03af5482-56b2-4596-92a8-d04e312bd767")}catch{}const I={data:[],error:null,isPending:null,success:null},R=(e,r)=>{switch(r.type){default:return e;case"IS_PENDING":return{data:[],isPending:!0,success:!1,error:""};case"SUCCESS":return{data:r.payload,error:!1,isPending:!1,success:!0};case"ERROR":return{data:[],isPending:!1,success:!1,error:r.payoad}}},D=e=>{const[r,a]=l.useReducer(R,I);let s=g(h,e);return{state:r,getCollectionCount:async c=>{let n;c?n=u(s,p(...c)):n=u(s),a({type:"IS_PENDING"}),m(n).then(t=>{const i=t.data().count;console.log("count",i),a({type:"SUCCESS",payload:i})}).catch(t=>{console.log("firestore err",t.message),a({type:"ERROR",payload:t.message})})}}},P=()=>{const{closeModal:e}=y(),[r,a]=l.useState(null);console.log("erfNo",r);const{state:s,getCollection:d}=D("erfs"),c=t=>{d(["erfNo","==",t.erfNo.trim()])},n=N({erfNo:E().required("Ast No is required.")});return l.useEffect(()=>{s.success&&s.data.length>0&&(e(),f.success(`Erf No "${r}", succesfully found`,{position:"bottom-left"})),s.success&&s.data.length===0&&(e(),f.warn(`Erf No "${r}", NOT found`,{position:"top-left"}),d())},[s.success,e]),l.useEffect(()=>{s.error&&console.log("state.error",s.error)},[s.error]),o.jsx("div",{className:"form-wrapper",children:o.jsx("div",{className:"form-container erfs-search",children:o.jsx(b,{initialValues:{erfNo:""},onSubmit:c,validationSchema:n,children:t=>(a(t.values.erfNo),o.jsx(o.Fragment,{children:o.jsxs(x,{children:[o.jsx(S,{hl1:"Erfs Search"}),o.jsx(j,{msg:"Enter the Erf No to search for."}),o.jsx("div",{className:"search-erfs-form",children:o.jsx(C,{control:"input",type:"text",label:"Erf NO",name:"erfNo",placeholder:"",autoFocus:!0})}),s.error&&o.jsx(w,{errorMsg:s.error}),o.jsx(F,{formik:t,signState:s})]})}))})})})};export{P as default};
//# sourceMappingURL=FormErfsSearch-E2abs5GB.js.map
