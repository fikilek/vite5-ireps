import{B as F,u as W,r as t,D as E,am as g,an as c,a9 as y,j as e,ab as q,ad as v,ae as S,af as N,ap as U,ah as n,aq as C,aj as M}from"./index-BjVKhCAv.js";import{u as B}from"./useSignup-P4ig9JK2.js";const $=b=>{var p;const{response:s,getDocument:w}=F("users"),{user:i}=W(),{uid:l}=i,[r,k]=t.useState(null);let d=[{key:"choose",value:"choose"}];r!=null&&r.workbases&&((p=r==null?void 0:r.workbases)==null||p.map(a=>{d.push({key:a,value:a})}));const{closeModal:u}=E(),{formData:m}=b,{updateUserWorkbase:x,signupState:o}=B(),h={newWorkbase:m,workbase:m,password:""},f=a=>{x(a)},j=g({newWorkbase:c().required("Workbase is required."),workbase:c().required("Workbase is required."),password:c().required("Password is required.")});return t.useEffect(()=>{o.success&&(u(),y.success(`User workbase for "${i.displayName}", succesfully updated.`,{position:"bottom-left"}))},[o.success,u]),t.useEffect(()=>{s.success&&(s==null||s.document,k(s==null?void 0:s.document))},[s.success]),t.useEffect(()=>{w(l)},[l]),e.jsx("div",{className:"form-wrapper",children:e.jsx("div",{className:"form-container edit-user-workbase",children:e.jsx(q,{initialValues:h,onSubmit:f,validationSchema:j,children:a=>e.jsx(e.Fragment,{children:e.jsxs(v,{children:[e.jsx(S,{hl1:"Edit User Workbase",hr1:e.jsx("p",{}),children:e.jsx(N,{})}),e.jsx(U,{msg:"Enter the new workbase on the 'workbase' field below and submit."}),e.jsxs("div",{className:"edit-workbase-form",children:[e.jsx(n,{control:"input",type:"text",label:"Old Workbase",name:"workbase",placeholder:"",readOnly:!0}),e.jsx(n,{control:"select",type:"text",label:"New Workbase",name:"newWorkbase",placeholder:"",options:d}),e.jsx(n,{control:"inputPwd",type:"password",label:"Password",name:"password",placeholder:"",autoComplete:"user password"})]}),o.error&&e.jsx(C,{errorMsg:o.error}),e.jsx(M,{formik:a,signState:o})]})})})})})};export{$ as default};
