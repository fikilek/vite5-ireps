import{j as t,n as b,bg as T,r,s as N,bf as A,t as M,v as C}from"./index-BjVKhCAv.js";import{u as g}from"./useIrepsMap--We17ACJ.js";import{b as k}from"./useTrns-BiXDnjMc.js";import w from"./IwTrnsOnAst-C3CjWixM.js";const S=e=>{const{activeTab:s,setActiveTab:a}=e,i=c=>{a(c.target.id)};return t.jsxs("div",{className:"asts-activity-header",children:[t.jsxs("div",{className:"aah aah-left",children:[t.jsx("button",{id:"possibleTrns",onClick:i,className:`aah-btn possible-trns ${s==="possibleTrns"?"active":""} `,children:"Possible Trns"}),t.jsx("button",{id:"meterhistory",onClick:i,className:`aah-btn meter-history ${s==="meterhistory"?"active":""}`,children:"Meter History"}),t.jsx("button",{id:"trnHistory",onClick:i,className:`aah-btn trn-history ${s==="trnHistory"?"active":""}`,children:"Trn History"})]}),t.jsxs("div",{className:"aah aah-right ",children:[t.jsx("button",{id:"timeline",onClick:i,className:`aah-btn timeline ${s==="timeline"?"active":""}`,children:"Timeline"}),t.jsx("button",{id:"comments",onClick:i,className:`aah-btn comments ${s==="comments"?"active":""}`,children:"Comments"}),t.jsx("button",{id:"media",onClick:i,className:`aah-btn media ${s==="media"?"active":""}`,children:"Media"})]})]})},I=e=>{const{activeTab:s}=e;return t.jsx("div",{className:"asts-activity-name-header",children:s})},H=e=>{var y;const{trnsNewFormData:s,trnsValidationSchema:a}=k(),{ast:i}=e,{trns:c,erf:l,astData:p}=i,{astNo:n,astId:d,astCatergory:o,astState:m,astManufacturer:h,astName:v,meter:x}=p,{phase:j,type:u}=x;return t.jsxs("div",{className:"ast-activity-trns",children:[t.jsx(I,{}),t.jsxs("div",{className:"trn-btns",children:[t.jsxs("div",{className:"btns-",children:[t.jsx(b,{data:{modalName:"meter-tid",data:{...s.meter.tid,astData:{astNo:n,astId:d,astCatergory:o},erf:l},validationSchema:a.meter.tid,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"TID transaction"},children:"Tid"}),t.jsx(b,{data:{modalName:"meter-inspection",data:{...s.meter.inspection,astData:{astNo:n,astState:m,astManufacturer:h,astName:v,astCatergory:o,astId:d,meter:{...(y=s.meter.inspection.astData)==null?void 0:y.meter,phase:j,type:u}},erf:l},validationSchema:a.meter.inspection,infoName:"",irepsKeyItem:"trns",width:"3rem",displayMode:"modal",title:"Meter Inspection"},children:"Insp"})]}),t.jsx("div",{className:"info",children:t.jsx("p",{children:"Click the desired button to launch the transaction "})})]})]})},f=e=>{const{title:s,content:a}=e;return t.jsxs("div",{className:"coming-soon",children:[t.jsx("h2",{className:"title",children:s}),t.jsx("h3",{children:"Coming Soon"}),t.jsx("p",{className:"content",children:a})]})},D=e=>t.jsx("div",{className:"ast-activity-trns",children:t.jsx(f,{title:"Meter History",content:`This display all activity that iREPS recorded 
		on a meter from when meter life started on to the end thus allowing lifetime tracking of an asset. 
		This will include installation or audit, inspection, tid, disconnection, reconnection, decommissioning and disposal.`})}),B=e=>{console.log("props",e);const{ast:s}=e;return t.jsx("div",{className:"ast-activity-trns",children:t.jsx(w,{data:{data:s}})})},E=e=>{console.log("props",e);const{ast:s}=e;return t.jsx("div",{className:"ast-activity-trns",children:t.jsx(T,{data:{data:s,displayMode:"modal",infoName:void 0,irepsKeyItem:"asts",tableBtnClass:void 0,validationSchema:void 0,width:"4rem"}})})},W=e=>(console.log("props",e),t.jsx("div",{className:"ast-activity-trns",children:"Meter Timeline"})),$=e=>(console.log("props",e),t.jsx("div",{className:"ast-activity-trns",children:t.jsx(f,{title:"Meter Comments",content:"This display all text comments recorded for the meter."})})),R=e=>{const{activeTab:s,ast:a}=e;return t.jsxs("div",{className:"asts-activity-body",children:[s==="possibleTrns"&&t.jsx(H,{ast:a}),s==="meterhistory"&&t.jsx(D,{ast:a}),s==="trnHistory"&&t.jsx(B,{ast:a}),s==="media"&&t.jsx(E,{ast:a}),s==="timeline"&&t.jsx(W,{ast:a}),s==="comments"&&t.jsx($,{ast:a})]})},K=e=>{const{data:s}=e==null?void 0:e.data,[a,i]=r.useState("possibleTrns");return t.jsxs("div",{className:"asts-activity",children:[t.jsx(R,{activeTab:a,ast:s}),t.jsx(S,{activeTab:a,setActiveTab:i,ast:s})]})},L=e=>{var h;const{ast:s}=e,a=N(),i=r.useMemo(()=>{var v,x,j,u;return{lat:Number((x=(v=s==null?void 0:s.location)==null?void 0:v.gps)==null?void 0:x.lat),lng:Number((u=(j=s==null?void 0:s.location)==null?void 0:j.gps)==null?void 0:u.lng)}},[s]),[c,l]=A(),[p,n]=r.useState(!1);r.useEffect(()=>{if(a)return a.panTo(i),a.setZoom(19),()=>n(!1)},[a,i]);const d=r.useCallback(()=>n(!0),[]),{trns:o}=s,m=(o==null?void 0:o.length)||"";return t.jsxs("div",{className:"map-meter-on-map",children:[t.jsxs(M,{ref:c,position:i,onClick:d,children:[m&&t.jsx("button",{className:"ast-asts",children:m}),t.jsx("button",{className:"ast-no-btn",children:t.jsx("span",{className:"ast-no",children:(h=s==null?void 0:s.astData)==null?void 0:h.astNo})})]}),p&&t.jsx(C,{anchor:l,onClose:()=>n(!1),onCloseClick:()=>n(!1),children:t.jsx("div",{children:t.jsx(K,{data:{data:s}})})})]})},V=()=>{const e=N(),{displayLMWardBoundaries:s,state:a}=g(),{lmWardBoundaries:i}=a;return r.useEffect(()=>{e&&s(e)},[e,i]),t.jsx("div",{className:"map-boundaries"})};export{V as M,L as a};
