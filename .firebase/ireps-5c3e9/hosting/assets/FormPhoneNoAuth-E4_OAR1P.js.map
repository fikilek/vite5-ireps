{"version":3,"file":"FormPhoneNoAuth-E4_OAR1P.js","sources":["../../src/components/forms/auth/FormPhoneNoAuth.jsx"],"sourcesContent":["import { number, object, string } from \"yup\";\nimport { useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Formik, Form } from \"formik\";\n\n// css\nimport \"@/components/forms/Form.css\";\n\n// custom hooks\nimport useModal from \"@/hooks/useModal.jsx\";\nimport { useSignup } from \"@/hooks/useSignup\";\n\n// context\nimport useAuthContext from \"@/hooks/useAuthContext.jsx\";\n\n// components\nimport FormikControl from \"@/components/forms/formik/FormikControl\";\nimport FormFooter from \"@/components/forms/formFooter/FormFooter\";\nimport FormMsg from \"@/components/forms/formMsg/FormMsg\";\nimport FormError from \"@/components/forms/formError/FormError\";\nimport HeaderGeneric from \"@/components/header/HeaderGeneric\";\nimport FormCloseBtn from \"@/components/forms/formBtns/FormCloseBtn\";\n\nconst PhoneNoAuth = props => {\n\t// console.log(`PhoneNoAuth`, props);\n\n\tconst { user } = useAuthContext();\n\n\tconst { closeModal } = useModal();\n\n\tconst phoneNumber = props.formData;\n\n\tconst { signupWithPhoneNumber, signupWithPhoneOtp, signupState } = useSignup();\n\n\t// Phone Number\n\tconst initialValues = {\n\t\tnewPhoneNumber: \"+16505551122\",\n\t\tphoneNumber: \"+16505551122\", //existing phone nuber\n\t};\n\n\tconst validationSchema = object({\n\t\tnewPhoneNumber: string().required(\"phone number is required.\"),\n\t\tphoneNumber: string().required(\"phone number is required.\"),\n\t});\n\n\tconst onSubmit = values => {\n\t\t// console.log(`Form values`, values);\n\t\tsignupWithPhoneNumber(values);\n\t};\n\n\t// Otp\n\tconst initialValuesOtp = {\n\t\totp: \"\",\n\t};\n\n\tconst validationSchemaOtp = object({\n\t\totp: number().required(\"otp is required.\"),\n\t});\n\n\tconst onSubmitOtp = values => {\n\t\tconsole.log(`Form otp values`, values);\n\t\tsignupWithPhoneOtp(values);\n\t};\n\n\tuseEffect(() => {\n\t\tif (signupState.success) {\n\t\t\tcloseModal();\n\t\t\ttoast.success(\n\t\t\t\t`User email for \"${user.displayName}\", succesfully updated on iREPS`,\n\t\t\t\t{\n\t\t\t\t\tposition: \"bottom-left\",\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}, [signupState?.success, closeModal, user?.displayName]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"form-wrapper\">\n\t\t\t\t<div className=\"form-container edit-user-phoneNumber\">\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tinitialValues={initialValues}\n\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\tvalidationSchema={validationSchema}\n\t\t\t\t\t>\n\t\t\t\t\t\t{formik => {\n\t\t\t\t\t\t\t// console.log(`formik`, formik);\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t\t\t\t<HeaderGeneric hl1=\"Verifiy Cell No\" hr1={<p></p>} ><FormCloseBtn /></HeaderGeneric>\n\t\t\t\t\t\t\t\t\t\t<div className=\"phone-no\">\n\t\t\t\t\t\t\t\t\t\t\t<FormMsg\n\t\t\t\t\t\t\t\t\t\t\t\tmsg={`Click SUBMIT to send a pin to the phone number. (Edit the phone number if necessary)`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"edit-email-form\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol=\"phoneNumberInput\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Existing Phone Number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={\"phoneNumber\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thide={\"hide\"}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol=\"phoneNumberInput\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Phone Number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tname={\"newPhoneNumber\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{signupState.error && <FormError errorMsg={signupState.error} />}\n\t\t\t\t\t\t\t\t\t\t\t<FormFooter formik={formik} isPending={signupState.isPending} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t\t<div id=\"recaptcha-container\"></div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t\t</Formik>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{signupState.otpSent && (\n\t\t\t\t<div className=\"form-wrapper\">\n\t\t\t\t\t<div className=\"form-container edit-user-email\">\n\t\t\t\t\t\t<Formik\n\t\t\t\t\t\t\tinitialValues={initialValuesOtp}\n\t\t\t\t\t\t\tonSubmit={onSubmitOtp}\n\t\t\t\t\t\t\tvalidationSchema={validationSchemaOtp}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{formik => {\n\t\t\t\t\t\t\t\t// console.log(`formik`, formik);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Form>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"otp\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FormMsg msg=\"OTP sent succesfully. Enter the pin number on the OTP fields below and submit.\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"edit-email-form\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormikControl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrol=\"input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"One Time Pin\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={\"otp\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t{signupState.error && <FormError errorMsg={signupState.error} />}\n\t\t\t\t\t\t\t\t\t\t\t\t<FormFooter formik={formik} signState={signupState.isPending} />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</Formik>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default PhoneNoAuth;\n"],"names":["PhoneNoAuth","props","user","useAuthContext","closeModal","useModal","signupWithPhoneNumber","signupWithPhoneOtp","signupState","useSignup","initialValues","validationSchema","object","string","onSubmit","values","initialValuesOtp","validationSchemaOtp","number","onSubmitOtp","useEffect","toast","jsxs","Fragment","jsx","Formik","formik","Form","HeaderGeneric","FormCloseBtn","FormMsg","FormikControl","FormError","FormFooter"],"mappings":"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"}