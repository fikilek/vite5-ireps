{"version":3,"file":"Users-077I9xaM.js","sources":["../../src/components/tables/TableUsers.jsx","../../src/components/tables/TableUsersRoles.jsx","../../src/components/tables/TableSelect.jsx","../../src/hooks/useUsers.jsx","../../src/pages/users/Users.jsx"],"sourcesContent":["import { useMemo } from \"react\";\n\nimport \"@/components/tables/Table.css\";\nimport \"@/components/tables/TableUsers.css\";\n\nimport { TableCustomNoRowsOverlay } from \"@/components/tables/TableCustomNoRowsOverlay\";\n\n// ag grid\nimport { ModuleRegistry } from \"@ag-grid-community/core\";\nimport { ClientSideRowModelModule } from \"@ag-grid-community/client-side-row-model\";\nimport { AgGridReact } from \"@ag-grid-community/react\";\nimport \"@ag-grid-community/styles/ag-grid.css\";\nimport \"@ag-grid-community/styles/ag-theme-quartz.css\";\nModuleRegistry.registerModules([ClientSideRowModelModule]);\n\nconst TableUsers = props => {\n\tconst { rowData, colDefs } = props;\n\n\tconst defaultColDef = useMemo(\n\t\t() => ({\n\t\t\tsortable: true,\n\t\t\tfilter: true,\n\t\t\tresizable: true,\n\t\t\tfloatingFilter: true,\n\t\t\tsuppressMovable: true,\n\t\t}),\n\t\t[]\n\t);\n\n\tconst getRowId = params => {\n\t\t// console.log(`params`, params);\n\t\treturn params.data.id;\n\t};\n\n\tconst rowClassRules = {\n\t\t\"row-disabled\": params => {\n\t\t\t// console.log(`params?.data?.disabled`, params?.data?.disabled);\n\t\t\treturn params?.data?.disabled;\n\t\t},\n\t};\n\n\treturn (\n\t\t<div className=\"ag-theme-quartz table table-users\">\n\t\t\t<AgGridReact\n\t\t\t\trowData={rowData}\n\t\t\t\tcolumnDefs={colDefs}\n\t\t\t\tdefaultColDef={defaultColDef}\n\t\t\t\tpagination={true}\n\t\t\t\tnoRowsOverlayComponent={TableCustomNoRowsOverlay}\n\t\t\t\tgetRowId={getRowId}\n\t\t\t\trowClassRules={rowClassRules}\n\t\t\t\treactiveCustomComponents\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default TableUsers;\n","import { useContext, useEffect, useState } from \"react\";\r\n\r\nimport \"@/components/tables/TableUsersRoles.css\";\r\n\r\nimport { userRoles } from \"@/utils/utils.jsx\";\r\nimport useModal from \"@/hooks/useModal.jsx\";\r\n\r\nimport useAuthContext from \"@/hooks/useAuthContext.jsx\";\r\n\r\nimport { ClaimsContext } from \"@/contexts/ClaimsContext\";\r\n\r\nconst TableUsersRoles = (params) => {\r\n\t// console.log(`params`, params);\r\n\r\n\tconst { roles: roles_ } = params?.data?.customClaims;\r\n\t// console.log(`roles_`, roles_);\r\n\r\n\tconst { customClaims, setCustomClaims } = useContext(ClaimsContext);\r\n\t// console.log(`customClaims`, customClaims);\r\n\r\n\tconst [roles, setRoles] = useState({});\r\n\r\n\tconst { uid } = params?.data;\r\n\r\n\tconst customClaimsUid = customClaims?.uid;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (uid === customClaimsUid && customClaims.roles) {\r\n\t\t\tsetRoles(customClaims.roles);\r\n\t\t} else {\r\n\t\t\tsetRoles(roles_);\r\n\t\t}\r\n\t}, [customClaims]);\r\n\r\n\tconst { openModal } = useModal();\r\n\r\n\tconst { user } = useAuthContext();\r\n\r\n\tconst selectDisabled =\r\n\t\tuid === user.uid || params.data.disabled ? true : false;\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tsetCustomClaims({\r\n\t\t\tuid,\r\n\t\t\troles,\r\n\t\t});\r\n\t\topenModal({\r\n\t\t\tmodalName: \"editUserRoles\",\r\n\t\t\tpayload: params.data,\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"table-users-roles\">\r\n\t\t\t{userRoles &&\r\n\t\t\t\tuserRoles.map((role) => {\r\n\t\t\t\t\tconsole.log(`role`, role);\r\n\t\t\t\t\tconst hasRole = roles[role.key] ? \"hasRole\" : \"\";\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={role.name}\r\n\t\t\t\t\t\t\tclassName={`table-btn ${hasRole}`}\r\n\t\t\t\t\t\t\ttitle={role.name}\r\n\t\t\t\t\t\t\t// disabled={selectDisabled}\r\n\t\t\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{role.abbreviation}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TableUsersRoles;\r\n","import { getFunctions, httpsCallable } from \"firebase/functions\";\nimport { toast } from \"react-toastify\";\n\nimport \"@/components/tables/TableSelect.css\";\n\nconst TableSelect = props => {\n\t// console.log(`props`, props);\n\n\t// TODO: implement access control and allow only managers to alter user state\n\n\tconst { value, options, onValueChange } = props;\n\n\tconst functions = getFunctions();\n\tconst disableUserAcc = httpsCallable(functions, \"disableUserAcc\");\n\n\tconst handleChange = e => {\n\t\t// console.log(`e.target.value`, e.target.value);\n\t\tonValueChange(e.target.value);\n\t\tprops.api.redrawRows();\n\t\tdisableUserAcc({\n\t\t\tuid: props.data.uid,\n\t\t\taction: e.target.value === \"disabled\" ? true : false,\n\t\t})\n\t\t\t// TODO: something I dont understand. e.target.value changes after data has been written to the DB. THis is strange. I should NOT change.\n\t\t\t.then(result => {\n\t\t\t\t// console.log(`result`, result);\n\t\t\t\t// console.log(`e.target.value`, e.target.value);\n\t\t\t\ttoast.success(\n\t\t\t\t\t`User acc [${props.data.displayName}] succesfully ${\n\t\t\t\t\t\te.target.value === \"disabled\" ? \"DISABLED\" : \"ENABLED\"\n\t\t\t\t\t}  `,\n\t\t\t\t\t{\n\t\t\t\t\t\tposition: \"bottom-left\",\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(`Error:`, error.message);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"table-user-acc-disable-select\">\n\t\t\t{/* TODO: use a spinner (for pending works) to show activity while waiting to diasable or enable the user to finish */}\n\t\t\t<select value={value} className=\"table-btn\" onChange={handleChange}>\n\t\t\t\t{options &&\n\t\t\t\t\toptions.map(option => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<option key={option} value={option}>\n\t\t\t\t\t\t\t\t{option}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</select>\n\t\t</div>\n\t);\n};\n\nexport default TableSelect;\n","import { getFunctions, httpsCallable } from \"firebase/functions\";\nimport { useEffect, useState } from \"react\";\n\nimport TableUsersRoles from \"@/components/tables/TableUsersRoles\";\nimport useCollection from \"@/hooks/useCollection\";\nimport TableSelect from \"@/components/tables/TableSelect\";\nimport useAuthContext from \"@/hooks/useAuthContext\";\nimport TableDate from \"@/components/tables/TableDate\";\nimport TableModalBtn from \"@/components/tables/TableModalBtn\";\n\nexport const useUsers = (props) => {\n\tconst [users, setUsers] = useState([]);\n\t// console.log(`users`, users);\n\n\tconst { user } = useAuthContext();\n\n\tconst { data } = useCollection(\"users\", null);\n\t// console.log(`users`, users);\n\n\tconst functions = getFunctions();\n\n\tconst listAllUsers = httpsCallable(functions, \"listAllUsers\");\n\n\tuseEffect(() => {\n\t\tif (!user) return;\n\t\tlistAllUsers().then((result) => {\n\t\t\t// console.log(`result`, result);\n\t\t\tlet newUsers = [];\n\t\t\tresult?.data?.forEach((element) => {\n\t\t\t\t// console.log(`element`, element);\n\t\t\t\tconst fromFbCol = data.find((data) => element.uid === data.id);\n\t\t\t\tif (fromFbCol) {\n\t\t\t\t\t// console.log(`fromFbCol`, fromFbCol);\n\t\t\t\t\tnewUsers.push({\n\t\t\t\t\t\t...element,\n\t\t\t\t\t\tcompanyName: fromFbCol.companyName,\n\t\t\t\t\t\tworkbase: fromFbCol.workbase,\n\t\t\t\t\t\tphoneNumber: fromFbCol.phoneNumber,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// console.log(`newUsers`, newUsers);\n\t\t\tsetUsers(newUsers);\n\t\t});\n\t}, [data, user]);\n\n\tconst usersTableFields = [\n\t\t{\n\t\t\tfield: \"uid\",\n\t\t\theaderName: \"users Id\",\n\t\t\twidth: 250,\n\t\t\thide: true,\n\t\t},\n\t\t{\n\t\t\tfield: \"disabled\",\n\t\t\theaderName: \"Acc Status?\",\n\t\t\twidth: 150,\n\t\t\t// cellRenderer: TableUserAccDisableSelect,\n\t\t\teditable: true,\n\t\t\tcellEditor: TableSelect,\n\t\t\tcellEditorParams: {\n\t\t\t\toptions: [\"enabled\", \"disabled\"],\n\t\t\t},\n\t\t\tvalueGetter: (params) => {\n\t\t\t\t// console.log(`params.data.disabled`, params.data.disabled);\n\t\t\t\treturn params.data.disabled ? \"disabled\" : \"enabled\";\n\t\t\t},\n\t\t\tvalueSetter: (params) => {\n\t\t\t\t// console.log(`params.newValue`, params.newValue);\n\t\t\t\tparams.data.disabled = params.newValue === \"disabled\" ? true : false;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tcellStyle: (params) => {\n\t\t\t\t// console.log(params);\n\t\t\t\tconst { uid } = params.data;\n\t\t\t\tconst selectDisabled = uid === user.uid ? true : false;\n\t\t\t\treturn selectDisabled\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tcolor: \"grey\",\n\t\t\t\t\t\t\tfontWeight: \"700\",\n\t\t\t\t\t\t\tpointerEvents: \"none\",\n\t\t\t\t\t\t\tcursor: \"none\",\n\t\t\t\t\t\t\tborderLeft: \"0.3rem solid grey\",\n\t\t\t\t\t  }\n\t\t\t\t\t: \"\";\n\t\t\t},\n\t\t},\n\t\t\t\t// Workbase\n\t\t\t\t{\n\t\t\t\t\tfield: \"workbase\",\n\t\t\t\t\theaderName: \"Workbase\",\n\t\t\t\t\twidth: 180,\n\t\t\t\t\tcellRenderer: (params) => {\n\t\t\t\t\t\t// console.log(`params`, params);\n\t\t\t\t\t\t// const { workbase } = params.data;\n\t\t\t\t\t\treturn <TableModalBtn data={params}>{params.value}</TableModalBtn>;\n\t\t\t\t\t},\n\t\t\t\t\tcellRendererParams: {\n\t\t\t\t\t\tmodalName: \"workbases\",\n\t\t\t\t\t\twidth: \"8rem\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t{\n\t\t\tfield: \"metadata.creationTime\",\n\t\t\theaderName: \"Date Created\",\n\t\t\twidth: 180,\n\t\t\tcellRenderer: (params) => {\n\t\t\t\t// console.log(`params`, params);\n\t\t\t\tconst newDate = new Date(params.data.metadata?.creationTime);\n\t\t\t\treturn <TableDate date={newDate} dateFormat={\"yyyy-MMM-dd HH:mm\"} />;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfield: \"metadata.lastSignInTime\",\n\t\t\theaderName: \"Last Signin\",\n\t\t\twidth: 180,\n\t\t\tcellRenderer: (params) => {\n\t\t\t\tconst newDate = new Date(params.data.metadata?.lastSignInTime);\n\t\t\t\treturn <TableDate date={newDate} dateFormat={\"yyyy-MMM-dd HH:mm\"} />;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfield: \"displayName\",\n\t\t\theaderName: \"Display Name\",\n\t\t\twidth: 170,\n\t\t},\n\t\t{\n\t\t\tfield: \"email\",\n\t\t\theaderName: \"Email Adr\",\n\t\t\twidth: 200,\n\t\t},\n\t\t{\n\t\t\tfield: \"emailVerified\",\n\t\t\theaderName: \"Email Verified\",\n\t\t\twidth: 150,\n\t\t\tcellRenderer: (params) => {\n\t\t\t\t// console.log(`params.data`, params.data);\n\t\t\t\treturn <p>{params.data.emailVerified ? \"Yes\" : \"No\"}</p>;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfield: \"customClaims.roles\",\n\t\t\theaderName: \"Roles\",\n\t\t\twidth: 220,\n\t\t\tcellRenderer: TableUsersRoles,\n\t\t\tvalueGetter: (params) => {\n\t\t\t\treturn params.value;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tfield: \"phoneNumber\",\n\t\t\theaderName: \"Phone Number\",\n\t\t\twidth: 150,\n\t\t},\n\t\t{\n\t\t\tfield: \"companyName\",\n\t\t\theaderName: \"Company Name\",\n\t\t\twidth: 170,\n\t\t},\n\t\t\n\n\t];\n\n\treturn { usersTableFields, users };\n};\n\n// TODO: Add phpto url column to users tables\n// TODO: Add online column to users table\n","import { useContext, useEffect, useState } from \"react\";\r\n\r\nimport TableUsers from \"@/components/tables/TableUsers\";\r\nimport { useUsers } from \"@/hooks/useUsers\";\r\nimport { ClaimsContext } from \"@/contexts/ClaimsContext\";\r\n\r\nconst Users = () => {\r\n\tconst { usersTableFields, users } = useUsers();\r\n\t// console.log(`users`, users);\r\n\tconst [unps, setUnps] = useState([]);\r\n\r\n\tconst { customClaims } = useContext(ClaimsContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetUnps(users);\r\n\t}, [users]);\r\n\r\n\t// TODO: fix the bug. Sometimes the unps is set to null on load\r\n\tuseEffect(() => {\r\n\t\tif (!customClaims) return;\r\n\r\n\t\t// find the user to update role\r\n\t\tconst userToUpdate = unps.find((unp) => unp.uid === customClaims?.uid);\r\n\r\n\t\t// update the user role\r\n\t\tconst updatedUser = {\r\n\t\t\t...userToUpdate,\r\n\t\t\tcustomClaims: {\r\n\t\t\t\t...userToUpdate?.customClaims,\r\n\t\t\t\troles: customClaims?.roles,\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\t// find the index of the updated uer\r\n\t\tconst index = unps.findIndex((unp) => unp.uid === customClaims?.uid);\r\n\t\tif (index === -1) return;\r\n\r\n\t\t// update unp at the index`\r\n\t\tconst newUnps = unps?.with(index, updatedUser);\r\n\t\t// console.log(`newUnps`, newUnps);\r\n\r\n\t\t// update the state\r\n\t\tsetUnps(newUnps);\r\n\t}, [customClaims]);\r\n\r\n\treturn (\r\n\t\t<div className=\"table\">\r\n\t\t\t<TableUsers rowData={unps} colDefs={usersTableFields} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Users;\r\n//\r\n"],"names":["ModuleRegistry","ClientSideRowModelModule","TableUsers","props","rowData","colDefs","defaultColDef","useMemo","getRowId","params","rowClassRules","_a","jsx","AgGridReact","TableCustomNoRowsOverlay","TableUsersRoles","roles_","customClaims","setCustomClaims","useContext","ClaimsContext","roles","setRoles","useState","uid","customClaimsUid","useEffect","openModal","useModal","user","useAuthContext","handleClick","e","userRoles","role","hasRole","TableSelect","value","options","onValueChange","functions","getFunctions","disableUserAcc","httpsCallable","handleChange","result","toast","error","option","useUsers","users","setUsers","data","useCollection","listAllUsers","newUsers","element","fromFbCol","TableModalBtn","newDate","TableDate","Users","usersTableFields","unps","setUnps","userToUpdate","unp","updatedUser","index","newUnps"],"mappings":"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"}