import{r as o,bt as x,N as T,bu as A,p as B,a5 as k,B as m,j as s,bv as z,I as c,bw as S,bx as _,by as $,bz as D,bA as O,bB as R,bC as U,bD as H,w as V,a1 as W,bE as q}from"./index-DJBUruBi.js";import G from"./MediaAction-BQ9IUcSg.js";import{I as J}from"./IrepsInfoWindow-D9qOfhrw.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9c170d28-bd9b-422e-93ef-c50a109af2b5",e._sentryDebugIdIdentifier="sentry-dbid-9c170d28-bd9b-422e-93ef-c50a109af2b5")}catch{}const K=()=>{var j,p,g,y,v,M,N,I;const{mediaData:e,setMediaData:t}=o.useContext(x);console.log("mediaData",e);const{deleteDocument:r,response:i}=T("media"),{deleteFile:f,success:n}=A(),a=e==null?void 0:e.data[e==null?void 0:e.displayPosition],h=(j=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:j.url,u=(g=(p=e==null?void 0:e.data)==null?void 0:p.metadata)==null?void 0:g.mediaCatergory,E=(v=(y=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:y.metadata)==null?void 0:v.createdByUser,l=(N=(M=e==null?void 0:e.data[e==null?void 0:e.displayPosition])==null?void 0:M.metadata)==null?void 0:N.createdAtDatetime;let b="";l&&(b=B(l==null?void 0:l.toDate(),k.dateFormat2));const P=async C=>{const F=C.currentTarget.id;try{let d=_($,a.url);await f(d,a.id),await r(F),t({...e,displayPosition:0})}catch(d){console.log(`Error deleting image ${d}`),m.error(`Error deleting image ${d}`,{position:"top-right"})}};return o.useEffect(()=>{i.error&&m.error(i.error,{position:"top-right"}),i.document&&n&&m.success(`Doc ${i.document} succesfully delete`,{position:"bottom-left"})},[i,n]),s.jsxs("div",{className:"media-main-display",children:[s.jsx(z,{hl1:E,hr3:b}),s.jsx("div",{className:"main-display-container",children:(I=e==null?void 0:e.data)!=null&&I.length?s.jsx("div",{className:"image",children:s.jsx("img",{src:h,alt:u,width:"100%",height:"100%"})}):s.jsx("p",{children:"No Image"})}),a&&s.jsx("button",{id:a==null?void 0:a.id,className:"mmd-delete-btn",onClick:P,children:s.jsx(c.Provider,{value:{color:"blue",className:"global-class-name"},children:s.jsx(S,{})})})]})},L=()=>s.jsxs("div",{className:"media-body",children:[s.jsx(K,{}),s.jsx(D,{})]}),w=e=>{const{filterTitle:t}=e;return s.jsxs("div",{className:"media-filter",children:[s.jsx("div",{className:"title",children:t}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-photos",title:"take a photo with camera",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(O,{})})}),s.jsx("span",{children:"3"})]}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-voice-clips",title:"make a voice clip",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(R,{})})}),s.jsx("span",{children:"2"})]}),s.jsxs("div",{className:"media-filter-btn",children:[s.jsx("button",{className:"mfb mfb-video-clips",title:"make a video clip",children:s.jsx(c.Provider,{value:{color:"blue",fontSize:"3rem"},children:s.jsx(U,{})})}),s.jsx("span",{children:"1"})]})]})},Q=()=>{const{mediaData:e,setMediaData:t}=o.useContext(x),r=e.data.length;return s.jsxs("div",{className:"media-filters",children:[s.jsxs("p",{className:"title",children:["Total Media ",r]}),s.jsxs("div",{className:"filters",children:[s.jsx(w,{filterTitle:"Erf"}),s.jsx(w,{filterTitle:"Asts"})]})]})},X=e=>{const{data:t}=e;return s.jsxs("div",{className:"media-footer",children:[s.jsx(Q,{}),s.jsx(H,{data:t})]})},Y=e=>{const{data:t}=e,{mediaData:r,setMediaData:i}=o.useContext(x),f=useMemo(()=>V("metadata.erfId","==",t.id),[t.id]),{data:n,error:a,isPending:h,success:u}=W("media",[f]);return o.useEffect(()=>{t&&i({...r,data:n})},[n]),o.useEffect(()=>{t&&i({...r,erfData:t})},[t]),s.jsxs("div",{className:"media",children:[s.jsx(L,{data:t}),s.jsx(X,{data:t}),s.jsx(G,{data:t})]})},te=e=>{const{data:t}=e;return s.jsx(J,{fhl1:"Media",fhl3:s.jsxs("span",{children:["Erf No: ",s.jsx("span",{className:"data-emphasis",children:t.erfNo})]}),fhr1:s.jsx(q,{}),children:s.jsx(Y,{data:t})})};export{te as default};
//# sourceMappingURL=IwMedia-D1z2M505.js.map
